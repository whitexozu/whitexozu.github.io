{"componentChunkName":"component---src-templates-blog-template-js","path":"/2021-09-23-framework-springboot-msa/","result":{"data":{"cur":{"id":"b3dbf41b-8816-5742-8a7f-eea5954c3e7d","html":"<p>MSA를 공부하기로 했습니다.</p>\n<h1 id=\"설명\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EB%AA%85\" aria-label=\"설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설명</h1>\n<h2 id=\"모놀리식\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%86%80%EB%A6%AC%EC%8B%9D\" aria-label=\"모놀리식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모놀리식</h2>\n<h3 id=\"모놀리식-이란\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%86%80%EB%A6%AC%EC%8B%9D-%EC%9D%B4%EB%9E%80\" aria-label=\"모놀리식 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모놀리식 이란</h3>\n<p align=\"center\">\n    <img src=\"https://miro.medium.com/max/433/0*p6M-yqvwSpcJvff7.png\" title=\"Monolith\">\n</p>\n<ul>\n<li>모놀리식 아키텍쳐란, 마이크로서비스 아키텍쳐의 반대 되는 개념으로 전통의 아키텍쳐를 지칭하는 의미로 생겨난 단어입니다. 하나의 서비스 또는 애플리케이션이 하나의 거대한 아키텍쳐를 모놀리식(Monolithic)하다고 합니다.</li>\n</ul>\n<h3 id=\"장점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장점</h3>\n<ol>\n<li>개발 초기에 단순한 아키텍쳐 구조와 개발에 용이합니다.</li>\n<li>어떤 서비스든지 개발되어있는 환경이 같아서 복잡하지 않습니다.</li>\n<li>쉽게 고가용성 서버 환경을 만들 수 있습니다.</li>\n<li>End-to-End 테스트가 용이합니다.</li>\n</ol>\n<h3 id=\"단점\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단점</h3>\n<ol>\n<li>프로젝트의 규모가 커짐에 따라 애플리케이션 구동시간이 늘어나고 빌드, 배포 시간도 길어집니다.</li>\n<li>조그마한 수정사항이 있어도 전체를 다시 빌드하고 배포를 해야합니다.</li>\n<li>많은 양의 코드가 몰려있어 개발자가 모두를 이해 할 수 없고 유지보수도 힘듭니다.</li>\n<li>일부분의 오류가 전체에 영향을 미칩니다.</li>\n<li>기능별로 알맞는 기술, 언어, 프레임워크를 선택하기가 까다롭습니다.</li>\n</ol>\n<p align=\"center\">\n    <img src=\"https://miro.medium.com/max/496/0*vcIB4iUrOPZ5VZP3.png\" title=\"Monolith crummy\">\n</p>\n<ul>\n<li>시간이 지남에따라 공통 비즈니스 프로세스는 중복되고 데이터를 공유 및 비즈니스 로직 재사용을 위해 단순했던 아키텍처는 복잡해집니다.</li>\n</ul>\n<h2 id=\"msamicroservices-architecture\" style=\"position:relative;\"><a href=\"#msamicroservices-architecture\" aria-label=\"msamicroservices architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MSA(Microservices Architecture)</h2>\n<h3 id=\"msa-란\" style=\"position:relative;\"><a href=\"#msa-%EB%9E%80\" aria-label=\"msa 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MSA 란</h3>\n<ul>\n<li>하나의 큰 어플리케이션을 여러개의 작은 어플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 아키텍쳐 입니다.</li>\n</ul>\n<p align=\"center\">\n    <img src=\"https://media.vlpt.us/post-images/tedigom/575c07d0-f980-11e9-ac2c-696993348d8a/pic1.png\" title=\"Microservices Architecture\">\n</p>\n<h3 id=\"장점-1\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90-1\" aria-label=\"장점 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장점</h3>\n<ol>\n<li>\n<p>서비스 별 개별 배포 가능합니다. ( 배포 시 전체 서비스의 중단이 없음)</p>\n<ul>\n<li>요구사항을 신속하게 반영하여 빠르게 배포할 수 있습니다.</li>\n</ul>\n</li>\n<li>\n<p>특정 서비스에 대한 확장성이 용이함니다.</p>\n<ul>\n<li>클라우드 사용에 적합한 아키텍쳐.</li>\n</ul>\n</li>\n<li>\n<p>장애가 전체 서비스로 확장될 가능성이 적습니다.</p>\n<ul>\n<li>부분적 장애에 대한 격리가 수월합니다.</li>\n</ul>\n</li>\n<li>신기술의 적용이 유연하고, 서비스를 polyglot하게 개발/운영 할 수 있습니다.</li>\n</ol>\n<h3 id=\"단점-1\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90-1\" aria-label=\"단점 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단점</h3>\n<ol>\n<li>서비스 간 호출 시 API를 사용하기 때문에, 통신 비용이나, Latency가 그만큼 늘어나게 됩니다.</li>\n<li>서비스가 분리되어 있기 때문에 테스트와 트랜잭션의 복잡도가 증가하고, 많은 자원을 필요로 합니다.</li>\n<li>데이터가 여러 서비스에 걸쳐 분산되기 때문에 한번에 조회하기 어렵고, 데이터의 정합성 또한 관리하기 어렵습니다.</li>\n</ol>\n<h3 id=\"모놀리식에서-msa로-전환\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%86%80%EB%A6%AC%EC%8B%9D%EC%97%90%EC%84%9C-msa%EB%A1%9C-%EC%A0%84%ED%99%98\" aria-label=\"모놀리식에서 msa로 전환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모놀리식에서 MSA로 전환</h3>\n<ol>\n<li>각각의 서비스는 독립적으로 배포가 가능해야합니다.</li>\n<li>각각의 서비스는 다른 서비스에 대한 의존성이 최소화 되어야 합니다.</li>\n<li>각각의 서비스는 데이터가 분산되어야 합니다.</li>\n</ol>\n<h3 id=\"조직\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%EC%A7%81\" aria-label=\"조직 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조직</h3>\n<ul>\n<li>MSA에서는 서비스 별로 팀을 나누고 서비스 기획에서부터 설계 개발 운영이 팀 내에서 이루어지기 때문에 다른 팀에 대한 의존성이 사라지게 됩니다. 역할별 요청과 피드백이 빨라지고, 때문에 유연하고 지속적인 운영과 개발이 함께하게 됩니다.</li>\n</ul>\n<p align=\"center\">\n    <img src=\"https://github.com/whitexozu/whitexozu.github.io/blob/master/assets/images/framework-springboot-msa-team.png?raw=true\" width=\"600\" title=\"team structure\">\n</p>\n<h3 id=\"확장-방식\" style=\"position:relative;\"><a href=\"#%ED%99%95%EC%9E%A5-%EB%B0%A9%EC%8B%9D\" aria-label=\"확장 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>확장 방식</h3>\n<ul>\n<li>모놀리식이 scale-up 이라면 MSA는 scale-out 방식으로 확장이 가능합니다.</li>\n</ul>\n<p align=\"center\">\n    <img src=\"https://mblogthumb-phinf.pstatic.net/20151124_152/islove8587_1448357175274p9SjR_PNG/tech_img2603.png?type=w2\" title=\"scale-up, scale-out\">\n</p>\n<h3 id=\"도메인-설계\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%84%A4%EA%B3%84\" aria-label=\"도메인 설계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도메인 설계</h3>\n<ul>\n<li>DDD(Domain-Driven Development)의 주요 설계 원칙: Loose Coupling(느슨한 결합)과 High Cohesion(높은 응집)</li>\n<li>강력한 모듈 경계</li>\n<li>독립 배포</li>\n<li>기술 다양성</li>\n</ul>\n<p><em>이부분은 마틴 파울러의 글을 보며 좀 더 고민해보겠습니다.</em></p>\n<h2 id=\"bffbackend-for-frontend\" style=\"position:relative;\"><a href=\"#bffbackend-for-frontend\" aria-label=\"bffbackend for frontend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BFF(Backend for frontend)</h2>\n<h3 id=\"bff-란\" style=\"position:relative;\"><a href=\"#bff-%EB%9E%80\" aria-label=\"bff 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BFF 란</h3>\n<p align=\"center\">\n    <img src=\"https://miro.medium.com/max/522/0*iwqbK6R1jCZICS13.png\" title=\"Backend for frontend\">\n</p>\n<ul>\n<li>특정 Frontend 애플리케이션 또는 인터페이스에서 사용할 별도의 Backend 서비스를 만드는 패턴이다.</li>\n</ul>\n<h3 id=\"edaevent-driven-architecture\" style=\"position:relative;\"><a href=\"#edaevent-driven-architecture\" aria-label=\"edaevent driven architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EDA(Event driven architecture)</h3>\n<h3 id=\"eda-란\" style=\"position:relative;\"><a href=\"#eda-%EB%9E%80\" aria-label=\"eda 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EDA 란</h3>\n<ul>\n<li>분산된 시스템 간에 이벤트를 생성, 발행 (publishing)하고 발행된 이벤트를 필요로하는 수신자에게 전송된다. 이벤트를 수신한 수신자가 이벤트를 처리하는 형태의 시스템 아키텍쳐.</li>\n</ul>\n<!-- <p align=\"center\">\n    <img src=\"https://jaehun2841.github.io/2019/06/23/2019-06-23-event-driven-architecture/EDA.png\" title=\"Monolith crummy\"/>\n</p> -->\n<p align=\"center\">\n    <img src=\"https://jaehun2841.github.io/2019/06/23/2019-06-23-event-driven-architecture/EDM.png\" title=\"Event driven architecture\">\n</p>\n<h3 id=\"장점-2\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90-2\" aria-label=\"장점 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장점</h3>\n<ol>\n<li>시스템 간의 느슨한 결합이 가능 하므로 분산 시스템, Microservice 환경에서 시스템 간 의존성을 배제 할 수 있다. (시스템은 Event Channel인 Message Broker에 대한 의존성만 가진다.)</li>\n<li>다른 시스템의 정보를 알 필요가 없다 - 약속된 Event message를 가지고 상호 정보를 교환한다.</li>\n<li>micro service 단위로 시스템을 분리하기 쉽기 때문에 확장성, 탄력성을 고려하기 쉽다.</li>\n</ol>\n<h3 id=\"단점-2\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90-2\" aria-label=\"단점 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단점</h3>\n<ol>\n<li>Event를 전송하기 위한 Message Broker에 대한 의존성이 커지기 때문에 Message Broker 장애 상황 시, 전체 장애로 이어질 수 있다.</li>\n<li>Transaction 단위가 격리되기 때문에 서비스 장애 발생시 retry/rollback을 고려해야 한다.</li>\n<li>시스템 전체 Flow를 파악하기 어렵다. - 명확한 Flow를 보기 위해서는 시스템을 모니터링하여야 한다.</li>\n<li>디버깅이 어렵다.</li>\n</ol>\n<h1 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h1>\n<h2 id=\"structure\" style=\"position:relative;\"><a href=\"#structure\" aria-label=\"structure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>structure</h2>\n<p align=\"center\">\n    <img src=\"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbKpx8I%2FbtqWX4MCkUa%2FbtFtRRQkPEUuILUp9Jrzj1%2Fimg.png\" width=\"600\" title=\"msa structure\">\n</p>\n<h2 id=\"create-maven-project-in-vscode\" style=\"position:relative;\"><a href=\"#create-maven-project-in-vscode\" aria-label=\"create maven project in vscode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>create maven project in vscode</h2>\n<ul>\n<li>vscode에서 <code class=\"language-text\">ctrl</code> + <code class=\"language-text\">shift</code> + <code class=\"language-text\">p</code> 를 누른후 <em>spring.initializr.maven-project</em> 선택하여 maven 프로젝트를 생성합니다.</li>\n<li>생성시 설정 사항은 하기의 내용처럼 표현 하겠습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Spring boot Version : 2.5.4 이상\nLanguage : Java\nGroup Id : com.example\nArtifact Id : project_name\nPackaging Type : war\nJava version : 8\ndependencies : select package list</code></pre></div>\n<h2 id=\"spring-cloud-config\" style=\"position:relative;\"><a href=\"#spring-cloud-config\" aria-label=\"spring cloud config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring cloud config</h2>\n<h3 id=\"spring-cloud-config-란\" style=\"position:relative;\"><a href=\"#spring-cloud-config-%EB%9E%80\" aria-label=\"spring cloud config 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring cloud config 란</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- application의 config 파일은(property, yml) 중앙 집중 방식의 관리가 가능하기 때문에 microservice의 모든 confing 파일을 각각 수정하는 수고를 줄일 수 있습니다.\n\n> Spring Cloud Config provides server-side and client-side support for externalized configuration in a distributed system. With the Config Server, you have a central place to manage external properties for applications across all environments.</code></pre></div>\n<h3 id=\"spring-cloud-config-project\" style=\"position:relative;\"><a href=\"#spring-cloud-config-project\" aria-label=\"spring cloud config project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring cloud config project</h3>\n<ol>\n<li>\n<p>Config 프로젝트 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Spring boot Version : 2.5.4\nLanguage : Java\nGroup Id : com.example\nArtifact Id : config\nPackaging Type : war\nJava version : 8\ndependencies : Spring Web, Config Server</code></pre></div>\n</li>\n<li>\n<p>github에 설정 파일 생성</p>\n<ol>\n<li>github에 repository 생성, 저는 <em>Spring-Cloud-Config-Repository</em> 이렇게 생성 했습니다.</li>\n<li>ms1-dev.yml 파일 생성 후 push</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">ms1</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">profile</span><span class=\"token punctuation\">:</span> I'm dev ms1\n  <span class=\"token key atrule\">comment</span><span class=\"token punctuation\">:</span> Hello<span class=\"token tag\">!</span> updated by Spring Bus with webhook<span class=\"token tag\">!</span></code></pre></div>\n<ol>\n<li>ms2-dev.yml 파일 생성 후 push</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">ms2</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">profile</span><span class=\"token punctuation\">:</span> I'm dev ms2\n  <span class=\"token key atrule\">comment</span><span class=\"token punctuation\">:</span> Hello<span class=\"token tag\">!</span> updated by Spring Bus with webhook<span class=\"token tag\">!</span></code></pre></div>\n</li>\n<li>\n<p>application.yml</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8888</span>\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">git</span><span class=\"token punctuation\">:</span>\n         <span class=\"token key atrule\">default-label</span><span class=\"token punctuation\">:</span> main\n         <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com/whitexozu/Spring<span class=\"token punctuation\">-</span>Cloud<span class=\"token punctuation\">-</span>Config<span class=\"token punctuation\">-</span>Repository</code></pre></div>\n</li>\n<li>\n<p>ConfigApplication.java</p>\n<ul>\n<li>@EnableConfigServer 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token annotation punctuation\">@EnableConfigServer</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ol>\n<h3 id=\"microservices-1-project\" style=\"position:relative;\"><a href=\"#microservices-1-project\" aria-label=\"microservices 1 project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>microservices 1 project</h3>\n<ol>\n<li>\n<p>ms1 프로젝트 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Spring boot Version : 2.5.4\nLanguage : Java\nGroup Id : com.example\nArtifact Id : ms1\nPackaging Type : war\nJava version : 8\ndependencies : Spring Web, Config Client</code></pre></div>\n</li>\n<li>\n<p>pom.xml</p>\n<ul>\n<li>package 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-bootstrap<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n...</code></pre></div>\n</li>\n<li>\n<p>bootstrap.yml</p>\n<ul>\n<li>bootstrap.yml 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">active</span><span class=\"token punctuation\">:</span> dev\n\n<span class=\"token key atrule\">management</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">endpoints</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">exposure</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span>\n\n<span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8089</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span> dev\n <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ms1\n <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">label</span><span class=\"token punctuation\">:</span> main\n     <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n     <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span><span class=\"token number\">8888</span>\n     <span class=\"token key atrule\">fail-fast</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<blockquote>\n<p>bootstrap.yml 또는 bootstrap.properties <br/>\nSpring Cloud를 사용 중이고 애플리케이션 구성이 원격 구성 서버 (예 : Spring Cloud Config 서버)에 저장된 경우에만 사용합니다.</p>\n</blockquote>\n</li>\n<li>\n<p>controller</p>\n<ul>\n<li>ConfigController.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms1<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms1<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DynamicConfigService</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms1<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StaticConfigService</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConfigController</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">DynamicConfigService</span> configDynamicService<span class=\"token punctuation\">;</span>\n\n   <span class=\"token annotation punctuation\">@Autowired</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">ConfigController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DynamicConfigService</span> configDynamicService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>configDynamicService <span class=\"token operator\">=</span> configDynamicService<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/dynamic\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getConfigFromDynamic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> configDynamicService<span class=\"token punctuation\">.</span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>service</p>\n<ul>\n<li>DynamicConfigService.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms1<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RefreshScope</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token annotation punctuation\">@RefreshScope</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DynamicConfigService</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${ms1.profile}\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> profile<span class=\"token punctuation\">;</span>\n   <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${ms1.comment}\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> comment<span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"profile\"</span><span class=\"token punctuation\">,</span> profile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"comment\"</span><span class=\"token punctuation\">,</span> comment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>test</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:8089/dynamic\"</span></code></pre></div>\n</li>\n</ol>\n<h3 id=\"microservices-2-project\" style=\"position:relative;\"><a href=\"#microservices-2-project\" aria-label=\"microservices 2 project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>microservices 2 project</h3>\n<ol>\n<li>\n<p>ms2 프로젝트 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Spring boot Version : 2.5.4\nLanguage : Java\nGroup Id : com.example\nArtifact Id : ms2\nPackaging Type : war\nJava version : 8\ndependencies : Spring Web, Config Client</code></pre></div>\n</li>\n<li>\n<p>pom.xml</p>\n<ul>\n<li>package 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-bootstrap<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n...</code></pre></div>\n</li>\n<li>\n<p>bootstrap.yml</p>\n<ul>\n<li>bootstrap.yml 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">active</span><span class=\"token punctuation\">:</span> dev\n\n<span class=\"token key atrule\">management</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">endpoints</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">exposure</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span> dev\n <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ms2\n <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">label</span><span class=\"token punctuation\">:</span> main\n     <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n     <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span><span class=\"token number\">8888</span>\n     <span class=\"token key atrule\">fail-fast</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">active</span><span class=\"token punctuation\">:</span> dev\n\n<span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n</li>\n<li>\n<p>controller</p>\n<ul>\n<li>ConfigController.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms2<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms2<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StaticConfigService</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConfigController</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">StaticConfigService</span> configStaticService<span class=\"token punctuation\">;</span>\n\n   <span class=\"token annotation punctuation\">@Autowired</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">ConfigController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StaticConfigService</span> configStaticService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>configStaticService <span class=\"token operator\">=</span> configStaticService<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/static\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getConfigFromStatic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">// http://localhost:8089/static</span>\n       <span class=\"token keyword\">return</span> configStaticService<span class=\"token punctuation\">.</span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>service</p>\n<ul>\n<li>StaticConfigService.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms2<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StaticConfigService</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${ms2.profile}\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> profile<span class=\"token punctuation\">;</span>\n   <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${ms2.comment}\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> comment<span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"profile\"</span><span class=\"token punctuation\">,</span> profile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"comment\"</span><span class=\"token punctuation\">,</span> comment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>test</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost/static\"</span></code></pre></div>\n</li>\n</ol>\n<h2 id=\"kafka\" style=\"position:relative;\"><a href=\"#kafka\" aria-label=\"kafka permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka</h2>\n<h3 id=\"설치\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98\" aria-label=\"설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치</h3>\n<ol>\n<li>\n<p>다운로드</p>\n<ol>\n<li>브라우저에서 <a href=\"https://kafka.apache.org/downloads\">Apache Kafka</a>에 방문합니다.</li>\n<li>원하는 버젼의 Binary 파일을 다운로드 받습니다. 전 <em>kafka</em>2.13-2.8.1.tgz (asc, sha512)_ 으로 받았습니다.</li>\n<li>압축을 풀고 설정파일을 수정합니다.</li>\n<li>\n<p>D:\\util\\kafka_2.13-2.8.1\\config\\zookeeper.properties</p>\n<ul>\n<li>dataDir=D:\\dev\\tmp\\zookeeper</li>\n</ul>\n</li>\n<li>\n<p>D:\\util\\kafka_2.13-2.8.1\\config\\server.properties</p>\n<ul>\n<li>log.dirs=D:\\log\\kafka</li>\n</ul>\n</li>\n</ol>\n</li>\n<li>\n<p>Zookeeper 실행</p>\n<ol>\n<li>D:\\util\\kafka_2.13-2.8.1\\bin\\windows</li>\n<li>.\\zookeeper-server-start.bat ....\\config\\zookeeper.properties</li>\n</ol>\n</li>\n<li>\n<p>Kafka 실행</p>\n<ol>\n<li>D:\\util\\kafka_2.13-2.8.1\\bin\\windows</li>\n<li>.\\kafka-server-start.bat ....\\config\\server.properties</li>\n</ol>\n</li>\n<li>\n<p>에러 발생</p>\n<ul>\n<li>temp.properties 에러 발생시 <em>D:\\log\\kafka</em>에 모든 폴더와 파일을 지운 후 다시 실행하면 됩니다.</li>\n</ul>\n</li>\n<li>\n<p>Topic 생성</p>\n<ul>\n<li>.\\kafka-topics.bat —create —zookeeper localhost:2181 —replication-factor 1 —partitions 1 —topic test_topic</li>\n</ul>\n</li>\n<li>\n<p>Topic 목록 확인</p>\n<ul>\n<li>.\\kafka-topics.bat —list —zookeeper localhost:2181</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"microservices-1-project-1\" style=\"position:relative;\"><a href=\"#microservices-1-project-1\" aria-label=\"microservices 1 project 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>microservices 1 project</h3>\n<ol>\n<li>\n<p>bootstrap.yml</p>\n<ul>\n<li>bootstrap.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span> dev\n <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ms1\n <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">label</span><span class=\"token punctuation\">:</span> main\n     <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n     <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span><span class=\"token number\">8888</span>\n     <span class=\"token key atrule\">fail-fast</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n <span class=\"token key atrule\">kafka</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">bootstrap-servers</span><span class=\"token punctuation\">:</span> localhost<span class=\"token punctuation\">:</span><span class=\"token number\">9092</span>\n   <span class=\"token key atrule\">consumer</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">group-id</span><span class=\"token punctuation\">:</span> group_id_ms2\n     <span class=\"token key atrule\">auto-offset-reset</span><span class=\"token punctuation\">:</span> earliest\n     <span class=\"token key atrule\">key-deserializer</span><span class=\"token punctuation\">:</span> org.apache.kafka.common.serialization.StringDeserializer\n     <span class=\"token key atrule\">value-deserializer</span><span class=\"token punctuation\">:</span> org.apache.kafka.common.serialization.StringDeserializer</code></pre></div>\n</li>\n<li>\n<p>service</p>\n<ul>\n<li>Consumer.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms1<span class=\"token punctuation\">.</span>kafka<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>kafka<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">KafkaListener</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Consumer</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Consumer</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token annotation punctuation\">@KafkaListener</span><span class=\"token punctuation\">(</span>topics <span class=\"token operator\">=</span> <span class=\"token string\">\"test_topic\"</span><span class=\"token punctuation\">,</span> groupId <span class=\"token operator\">=</span> <span class=\"token string\">\"group_id_ms2\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">consume</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n       logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#### -> Consumed message -> %s\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<h3 id=\"microservices-2-project-1\" style=\"position:relative;\"><a href=\"#microservices-2-project-1\" aria-label=\"microservices 2 project 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>microservices 2 project</h3>\n<ol>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">active</span><span class=\"token punctuation\">:</span> dev\n <span class=\"token key atrule\">kafka</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">bootstrap-servers</span><span class=\"token punctuation\">:</span> localhost<span class=\"token punctuation\">:</span><span class=\"token number\">9092</span>\n   <span class=\"token key atrule\">producer</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">retries</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n     <span class=\"token key atrule\">acks</span><span class=\"token punctuation\">:</span> all\n     <span class=\"token key atrule\">key-serializer</span><span class=\"token punctuation\">:</span> org.apache.kafka.common.serialization.StringSerializer\n     <span class=\"token key atrule\">value-serializer</span><span class=\"token punctuation\">:</span> org.apache.kafka.common.serialization.StringSerializer</code></pre></div>\n</li>\n<li>\n<p>controller</p>\n<ul>\n<li>KafkaController.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms2<span class=\"token punctuation\">.</span>kafka<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms2<span class=\"token punctuation\">.</span>kafka<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Producer</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PostMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/kafka\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">KafkaController</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Producer</span> producer<span class=\"token punctuation\">;</span>\n\n   <span class=\"token annotation punctuation\">@Autowired</span>\n   <span class=\"token class-name\">KafkaController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Producer</span> producer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>producer <span class=\"token operator\">=</span> producer<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/publish\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendMessageToKafkaTopic</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>producer<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>service</p>\n<ul>\n<li>Producer.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms2<span class=\"token punctuation\">.</span>kafka<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>kafka<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">KafkaTemplate</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Producer</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Producer</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> TOPIC <span class=\"token operator\">=</span> <span class=\"token string\">\"test_topic\"</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token annotation punctuation\">@Autowired</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">KafkaTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> kafkaTemplate<span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#### -> Producing message -> %s\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>kafkaTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>TOPIC<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>test</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X POST -F <span class=\"token string\">\"message=test message\"</span> http://localhost/kafka/publish</code></pre></div>\n</li>\n</ol>\n<h2 id=\"eureka\" style=\"position:relative;\"><a href=\"#eureka\" aria-label=\"eureka permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Eureka</h2>\n<h3 id=\"eureka-란\" style=\"position:relative;\"><a href=\"#eureka-%EB%9E%80\" aria-label=\"eureka 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Eureka 란</h3>\n<ul>\n<li>Eureka Server는 Eureka Client에 해당하는 마이크로서비스들을 등록, 관리, 검색 할 수 있는 레지스트리입니다.</li>\n</ul>\n<h3 id=\"eureka-server-project\" style=\"position:relative;\"><a href=\"#eureka-server-project\" aria-label=\"eureka server project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Eureka server project</h3>\n<ol>\n<li>\n<p>Eureka 프로젝트 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Spring boot Version : 2.5.4\nLanguage : Java\nGroup Id : com.example\nArtifact Id : eureka\nPackaging Type : war\nJava version : 8\ndependencies : Spring Web, Spring Boot Actuator, Eureka Server</code></pre></div>\n</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Eureka Server\n<span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9999</span>\n\n<span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>9999/eureka/\n   <span class=\"token key atrule\">register-with-eureka</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n   <span class=\"token key atrule\">fetch-registry</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n   <span class=\"token comment\">## Self-Preservation 모드를 켜고 끌 수 있는 설정이다. 가급적이면 운영 상황에서는 끄지 않는 것을 권장한다.</span>\n   <span class=\"token key atrule\">enable-self-preservation</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n</li>\n<li>\n<p>EurekaApplication.java</p>\n<ul>\n<li>@EnableEurekaServer 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token annotation punctuation\">@EnableEurekaServer</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>Eureka 서버 실행</li>\n<li>\n<p>Eureka 사이트 접속</p>\n<ul>\n<li><a href=\"http://localhost:9999/\">http://localhost:9999/</a></li>\n</ul>\n</li>\n</ol>\n<h3 id=\"microservices-1-project-2\" style=\"position:relative;\"><a href=\"#microservices-1-project-2\" aria-label=\"microservices 1 project 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>microservices 1 project</h3>\n<ol>\n<li>\n<p>pom.xml</p>\n<ul>\n<li>pom.xml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n...</code></pre></div>\n</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">service-url</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>9999/eureka/\n   <span class=\"token key atrule\">register-with-eureka</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n   <span class=\"token key atrule\">fetch-registry</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n</li>\n<li>Ms1 서버 실행</li>\n<li>\n<p>Eureka 서버 로그</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">..</span>.\nRegistered instance MS1/jhk.nmn.io:ms1:8089 with status UP <span class=\"token punctuation\">(</span>replication<span class=\"token operator\">=</span>true<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n</li>\n<li>\n<p>Eureka 사이트 접속</p>\n<ul>\n<li><a href=\"http://localhost:9999/\">http://localhost:9999/</a></li>\n<li>application 목록에 추가된 MS1 확인</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"microservices-2-project-2\" style=\"position:relative;\"><a href=\"#microservices-2-project-2\" aria-label=\"microservices 2 project 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>microservices 2 project</h3>\n<ol>\n<li>\n<p>pom.xml</p>\n<ul>\n<li>pom.xml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n...</code></pre></div>\n</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">service-url</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>9999/eureka/\n   <span class=\"token key atrule\">register-with-eureka</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n   <span class=\"token key atrule\">fetch-registry</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n</li>\n<li>Ms2 서버 실행</li>\n<li>\n<p>Eureka 서버 로그</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">..</span>.\nRegistered instance MS1/jhk.nmn.io:ms1:80 with status UP <span class=\"token punctuation\">(</span>replication<span class=\"token operator\">=</span>true<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n</li>\n<li>\n<p>Eureka 사이트 접속</p>\n<ul>\n<li><a href=\"http://localhost:9999/\">http://localhost:9999/</a></li>\n<li>application 목록에 추가된 MS2 확인</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"api-gateway\" style=\"position:relative;\"><a href=\"#api-gateway\" aria-label=\"api gateway permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API Gateway</h2>\n<h3 id=\"api-gateway-란\" style=\"position:relative;\"><a href=\"#api-gateway-%EB%9E%80\" aria-label=\"api gateway 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API Gateway 란</h3>\n<ul>\n<li>API Gateway는 서버 최앞단에 위치하여 모든 API 호출을 받습니다. 받은 API 호출을 인증한 후, 적절한 서비스들에 메세지를 전달될 수 있도록 합니다.</li>\n</ul>\n<h3 id=\"api-gateway가-필요한-이유\" style=\"position:relative;\"><a href=\"#api-gateway%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"api gateway가 필요한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API Gateway가 필요한 이유</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- 인증/인가: 부적절한 요청을 차단하여 Backend service를 보호\n- L/B &amp; Routing: Client의 요청에 따라 적절한 backend service를 로드밸런싱(L/B: Load Balancing)하고 연결(라우팅)\n- Logging: 유통되는 트래픽 로깅\n- Circuit Breaker: Backend service 장애 감지 및 대처\n- Strangler pattern: 시스템은 정상적으로 돌아가면서, 점진적으로 서비스 아키텍처로 코드를 분리</code></pre></div>\n<h3 id=\"zuul-vs-scg-spring-cloud-gateway\" style=\"position:relative;\"><a href=\"#zuul-vs-scg-spring-cloud-gateway\" aria-label=\"zuul vs scg spring cloud gateway permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zuul VS SCG (spring-cloud-gateway)</h3>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Zuul</th>\n<th align=\"center\">SCG</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">Blocking</td>\n<td align=\"center\">non-Blocking</td>\n</tr>\n<tr>\n<td align=\"center\">Filter only</td>\n<td align=\"center\">Predicates + Filters</td>\n</tr>\n<tr>\n<td align=\"center\">Tomcat</td>\n<td align=\"center\">Netty</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"scg-spring-cloud-gateway\" style=\"position:relative;\"><a href=\"#scg-spring-cloud-gateway\" aria-label=\"scg spring cloud gateway permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SCG (spring-cloud-gateway)</h2>\n<h3 id=\"scg-란\" style=\"position:relative;\"><a href=\"#scg-%EB%9E%80\" aria-label=\"scg 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SCG 란</h3>\n<ul>\n<li>Spring Cloud Gateway는 Spring WebFlux 위에서 API Gateway를 구축하기 위한 라이브러리입니다.</li>\n</ul>\n<blockquote>\n<p>This project provides a library for building an API Gateway on top of Spring WebFlux. Spring Cloud Gateway aims to provide a simple, yet effective way to route to APIs and provide cross cutting concerns to them such as: security, monitoring/metrics, and resiliency.</p>\n</blockquote>\n<h3 id=\"scg-project\" style=\"position:relative;\"><a href=\"#scg-project\" aria-label=\"scg project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SCG project</h3>\n<ol>\n<li>\n<p>SCG 프로젝트 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Spring boot Version : 2.5.5\nLanguage : Java\nGroup Id : com.example\nArtifact Id : scg\nPackaging Type : war\nJava version : 8\ndependencies : Spring Boot Actuator, Eureka Discovery Client, Gateway</code></pre></div>\n</li>\n<li>\n<p>pom.xml</p>\n<ul>\n<li>tomcat 관련 주석 처리</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">...\n<span class=\"token comment\">&lt;!-- &lt;dependency>\n   &lt;groupId>org.springframework.boot&lt;/groupId>\n   &lt;artifactId>spring-boot-starter-web&lt;/artifactId>\n&lt;/dependency> --></span>\n...\n<span class=\"token comment\">&lt;!-- &lt;dependency>\n   &lt;groupId>org.springframework.boot&lt;/groupId>\n   &lt;artifactId>spring-boot-starter-tomcat&lt;/artifactId>\n   &lt;scope>provided&lt;/scope>\n&lt;/dependency> --></span>\n...</code></pre></div>\n</li>\n<li>\n<p>ServletInitializer.java</p>\n<ul>\n<li>ServletInitializer.java 파일 삭제</li>\n</ul>\n</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7777</span>\n\n<span class=\"token key atrule\">management</span><span class=\"token punctuation\">:</span>\n <span class=\"token comment\"># security:</span>\n <span class=\"token comment\">#     enabled: false</span>\n <span class=\"token key atrule\">endpoints</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">exposure</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span>\n\n<span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">service-url</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>9999/eureka/\n   <span class=\"token key atrule\">register-with-eureka</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n   <span class=\"token key atrule\">fetch-registry</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> scg\n <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n       <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms1\n         <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span><span class=\"token number\">8089</span> <span class=\"token comment\"># 포워딩할 주소, http://localhost:7777/ms1 로 들어오면 http://localhost:8089 로 포워딩</span>\n         <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n           <span class=\"token punctuation\">-</span> Path=/ms1/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms1/**로 들어오는 요청은 ms1로 인식하겠다는 조건</span>\n\n       <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms2\n         <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span><span class=\"token number\">80</span> <span class=\"token comment\"># 포워딩 할 주소, http://localhost:7777/ms2 로 들어오면 http://localhost:80 로 포워딩</span>\n         <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n           <span class=\"token punctuation\">-</span> Path=/ms2/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms2/**로 들어오는 요청은 ms2로 인식하겠다는 조건</span></code></pre></div>\n</li>\n<li>\n<p>Controller</p>\n<ul>\n<li>Ms2 > TestController.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms1<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/ms1\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestController</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span>\n   <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">sample</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> resMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       resMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"First eureka client!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       resMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Spring Cloud is awesome!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       response <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>resMap<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>OK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>Ms2 > TestController.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>ms2<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/ms2\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestController</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span>\n   <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">sample</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> resMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       resMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Second eureka client!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       resMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Spring Cloud is awesome!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       response <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>resMap<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>OK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span>\n$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span></code></pre></div>\n</li>\n</ol>\n<h3 id=\"load-balance\" style=\"position:relative;\"><a href=\"#load-balance\" aria-label=\"load balance permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Load balance</h3>\n<ol>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms1\n       <span class=\"token comment\">#   uri: http://localhost:8089 # 포워딩할 주소, http://localhost:7777/ms1 로 들어오면 http://localhost:8089 로 포워딩</span>\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS1 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms1/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms1/**로 들어오는 요청은 ms1로 인식하겠다는 조건</span>\n\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms2\n       <span class=\"token comment\">#   uri: http://localhost:80 # 포워딩 할 주소, http://localhost:7777/ms2 로 들어오면 http://localhost:80 로 포워딩</span>\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS2 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms2/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms2/**로 들어오는 요청은 ms2로 인식하겠다는 조건</span></code></pre></div>\n</li>\n<li>\n<p>테스트 준비</p>\n<ol>\n<li>Ms2 프로젝트 복사</li>\n<li>서버 포트 변경</li>\n<li>서비 실행</li>\n<li>Eureka 사이트에서 Application > MS2 > Status 에 추가된 서버정보 확인</li>\n<li>Ms2의 API(curl -X GET ”<a href=\"http://localhost:7777/api/ms2/test%22\">http://localhost:7777/api/ms2/test”</a>) 테스트시 두서버가 번갈아가며 호출되는것을 확인 할 수 있습니다.</li>\n<li>한쪽에서 애러 발생시 다른 한쪽을 호출합니다.</li>\n</ol>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span></code></pre></div>\n</li>\n</ol>\n<h3 id=\"predicate\" style=\"position:relative;\"><a href=\"#predicate\" aria-label=\"predicate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Predicate</h3>\n<ul>\n<li>각 요청을 처리하기 전에 실행되는 로직, 헤더와 입력된 값 등 다양한 HTTP 요청이 정의된 기준에 맞는지를 찾는다.</li>\n</ul>\n<h4 id=\"after-before-between\" style=\"position:relative;\"><a href=\"#after-before-between\" aria-label=\"after before between permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>After, Before, Between</h4>\n<ol>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms1\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS1 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms1/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms1/**로 들어오는 요청은 ms1로 인식하겠다는 조건</span>\n         <span class=\"token punctuation\">-</span> After=2022<span class=\"token punctuation\">-</span>01<span class=\"token punctuation\">-</span>20T17<span class=\"token punctuation\">:</span>42<span class=\"token punctuation\">:</span>47.789<span class=\"token punctuation\">-</span><span class=\"token datetime number\">07:00</span>\n\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms2\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS2 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms2/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms2/**로 들어오는 요청은 ms2로 인식하겠다는 조건</span>\n         <span class=\"token punctuation\">-</span> Before=2017<span class=\"token punctuation\">-</span>01<span class=\"token punctuation\">-</span>20T17<span class=\"token punctuation\">:</span>42<span class=\"token punctuation\">:</span>47.789<span class=\"token punctuation\">-</span><span class=\"token datetime number\">07:00</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span>\n$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span></code></pre></div>\n</li>\n</ol>\n<h4 id=\"weight\" style=\"position:relative;\"><a href=\"#weight\" aria-label=\"weight permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Weight</h4>\n<ul>\n<li>group, weight를 기반으로 그룹별로 가중치를 계산하게 됩니다.</li>\n</ul>\n<h4 id=\"cookie\" style=\"position:relative;\"><a href=\"#cookie\" aria-label=\"cookie permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cookie</h4>\n<ul>\n<li>요청에 Cookie 값이 지정된 정규표현식을 만족하는지 조건을 검증합니다.</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms1\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS1 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms1/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms1/**로 들어오는 요청은 ms1로 인식하겠다는 조건</span>\n         <span class=\"token punctuation\">-</span> Cookie=USER_TOKEN<span class=\"token punctuation\">,</span> ms1\n\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms2\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS2 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms2/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms2/**로 들어오는 요청은 ms2로 인식하겠다는 조건</span>\n         <span class=\"token punctuation\">-</span> Cookie=USER_TOKEN<span class=\"token punctuation\">,</span> ms2</code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span> -v --cookie <span class=\"token string\">\"USER_TOKEN=ms1\"</span>\n$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span> -v --cookie <span class=\"token string\">\"USER_TOKEN=ms2\"</span></code></pre></div>\n</li>\n</ul>\n<h4 id=\"method\" style=\"position:relative;\"><a href=\"#method\" aria-label=\"method permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Method</h4>\n<ul>\n<li>HTTP Method 가 일치하는지 확인하는 조건을 추가합니다.</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms1\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS1 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms1/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms1/**로 들어오는 요청은 ms1로 인식하겠다는 조건</span>\n         <span class=\"token punctuation\">-</span> Method=GET\n\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms2\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS2 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms2/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms2/**로 들어오는 요청은 ms2로 인식하겠다는 조건</span>\n         <span class=\"token punctuation\">-</span> Method=POST</code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span>\n$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"filter\" style=\"position:relative;\"><a href=\"#filter\" aria-label=\"filter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Filter</h3>\n<p align=\"center\">\n    <img src=\"https://github.com/cheese10yun/blog-sample/raw/master/spring-msa/docs/images/gateway-flow.png\" title=\"spring cloud gateway flow\">\n</p>\n<h4 id=\"addrequestheader-addresponseheader-addrequestparameter\" style=\"position:relative;\"><a href=\"#addrequestheader-addresponseheader-addrequestparameter\" aria-label=\"addrequestheader addresponseheader addrequestparameter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AddRequestHeader, AddResponseHeader, AddRequestParameter</h4>\n<ul>\n<li>RequestHeader, RequestParam, ResponseHeader에 key, value 데이터를 추가합니다.</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms1\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS1 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms1/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms1/**로 들어오는 요청은 ms1로 인식하겠다는 조건</span>\n       <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> AddRequestHeader=token<span class=\"token punctuation\">,</span> <span class=\"token number\">123456</span>\n         <span class=\"token punctuation\">-</span> AddResponseHeader=authenticated<span class=\"token punctuation\">,</span> yes\n         <span class=\"token punctuation\">-</span> AddRequestParameter=temp1<span class=\"token punctuation\">,</span> aaa</code></pre></div>\n</li>\n<li>\n<p>controller</p>\n<ul>\n<li>Ms1 > TestController.java 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/ms1\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestController</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">sample</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestHeader</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"token\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> token<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"temp1\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> temp1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token : \"</span> <span class=\"token operator\">+</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"temp1 : \"</span> <span class=\"token operator\">+</span> temp1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> resMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       resMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"First eureka client!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       resMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Spring Cloud is awesome!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       response <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>resMap<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>OK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span> -v</code></pre></div>\n</li>\n</ul>\n<h4 id=\"rewritepath\" style=\"position:relative;\"><a href=\"#rewritepath\" aria-label=\"rewritepath permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RewritePath</h4>\n<ul>\n<li>정규표현식을 이용해서 replacement 파라미터로 변경할 수 있습니다. prefix를 제거해 보겠습니다.</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms1\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS1 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms1/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms1/**로 들어오는 요청은 ms1로 인식하겠다는 조건</span>\n       <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> RewritePath=/ms1/<span class=\"token punctuation\">?</span>(<span class=\"token punctuation\">?</span>&lt;segment<span class=\"token punctuation\">></span>.<span class=\"token important\">*)</span><span class=\"token punctuation\">,</span> /$\\<span class=\"token punctuation\">{</span>segment<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>controller</p>\n<ul>\n<li>Ms1 > TestController.java 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestController</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">sample</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n       <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ms1 '\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> resMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       resMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"First eureka client!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       resMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Spring Cloud is awesome!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       response <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>resMap<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>OK<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span></code></pre></div>\n</li>\n</ul>\n<h4 id=\"retry\" style=\"position:relative;\"><a href=\"#retry\" aria-label=\"retry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Retry</h4>\n<ol>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n           <span class=\"token punctuation\">...</span>\n           <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms2\n             <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS2 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n             <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n                 <span class=\"token punctuation\">-</span> Path=/ms2/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms2/**로 들어오는 요청은 ms2로 인식하겠다는 조건</span>\n             <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n                 <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Retry\n                   <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n                       <span class=\"token key atrule\">retries</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token comment\"># 재시도 횟수</span>\n                       <span class=\"token key atrule\">statuses</span><span class=\"token punctuation\">:</span> BAD_GATEWAY<span class=\"token punctuation\">,</span> INTERNAL_SERVER_ERROR<span class=\"token punctuation\">,</span> SERVICE_UNAVAILABLE\n                       <span class=\"token key atrule\">methods</span><span class=\"token punctuation\">:</span> GET<span class=\"token punctuation\">,</span> POST\n                       <span class=\"token key atrule\">backoff</span><span class=\"token punctuation\">:</span>\n                           <span class=\"token key atrule\">firstBackoff</span><span class=\"token punctuation\">:</span> 500ms <span class=\"token comment\">#첫번째 재시도는 실패 후 0.5초 후 수행</span>\n                           <span class=\"token key atrule\">maxBackoff</span><span class=\"token punctuation\">:</span> 2000ms <span class=\"token comment\">#재시도 간격</span>\n                           <span class=\"token key atrule\">factor</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token comment\">#firstBackoff * (factor^retries)가 재시도 간격임. maxBackoff보다 클 수는 없음.</span>\n                           <span class=\"token key atrule\">basedOnPreviousValue</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span></code></pre></div>\n</li>\n</ol>\n<h4 id=\"timeout\" style=\"position:relative;\"><a href=\"#timeout\" aria-label=\"timeout permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Timeout</h4>\n<ol>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n           <span class=\"token punctuation\">...</span>\n           <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms2\n             <span class=\"token punctuation\">...</span>\n             <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 라우터별 timeout 설정</span>\n                 <span class=\"token key atrule\">response-timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span>    <span class=\"token comment\"># 밀리 초 단위</span>\n                 <span class=\"token key atrule\">connect-timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2000</span>  <span class=\"token comment\"># 밀리 초 단위</span>\n       <span class=\"token key atrule\">httpclient</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 전역 timeout 설정</span>\n           <span class=\"token key atrule\">connect-timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>   <span class=\"token comment\"># 밀리 초 단위</span>\n           <span class=\"token key atrule\">response-timeout</span><span class=\"token punctuation\">:</span> 5s    <span class=\"token comment\"># duration</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span></code></pre></div>\n</li>\n</ol>\n<h4 id=\"global-filter\" style=\"position:relative;\"><a href=\"#global-filter\" aria-label=\"global filter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Global filter</h4>\n<ul>\n<li>각각의 필터를 필요로 하는 서비스에 개별적으로 넣어주는 CustomFilter와 다르게 전체적으로 적용되어야 되는 인증/권한과 같은 필터와 같은 경우에는 GlobalFilter로 구현을 하게 될 것입니다.</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n       <span class=\"token punctuation\">...</span>\n       <span class=\"token key atrule\">default-filters</span><span class=\"token punctuation\">:</span>\n           <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> GlobalFilter\n             <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n                 <span class=\"token key atrule\">baseMessage</span><span class=\"token punctuation\">:</span> Spring Cloud Gateway Global Filter\n                 <span class=\"token key atrule\">preLogger</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n                 <span class=\"token key atrule\">postLogger</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n</li>\n<li>\n<p>controller</p>\n<ul>\n<li>Scg > GlobalFilter.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>scg<span class=\"token punctuation\">.</span>filters</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Objects</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GatewayFilter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AbstractGatewayFilterFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>reactive<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServerHttpRequest</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>reactive<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServerHttpResponse</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServerWebExchange</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Getter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Setter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span>extern<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Slf4j</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">reactor<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>publisher<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Mono</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GlobalFilter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractGatewayFilterFactory</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GlobalFilter<span class=\"token punctuation\">.</span>Config</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">GlobalFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Config</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">GatewayFilter</span> <span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Config</span> config<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>exchange<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n           <span class=\"token class-name\">ServerHttpRequest</span> request <span class=\"token operator\">=</span> exchange<span class=\"token punctuation\">.</span><span class=\"token function\">getRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token class-name\">ServerHttpResponse</span> response <span class=\"token operator\">=</span> exchange<span class=\"token punctuation\">.</span><span class=\"token function\">getResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n           log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Global Filter baseMessage : {}\"</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span><span class=\"token function\">getBaseMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n           <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span><span class=\"token function\">isPreLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n               log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Global Filter Start : request id -> {}\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token punctuation\">}</span>\n\n           <span class=\"token comment\">// Request Header 에 token 이 존재하지 않을 때</span>\n           <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">containsKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GLOBAL_TOKEN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n               <span class=\"token keyword\">return</span> <span class=\"token function\">handleUnAuthorized</span><span class=\"token punctuation\">(</span>exchange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 401 Error</span>\n           <span class=\"token punctuation\">}</span>\n\n           <span class=\"token comment\">// Request Header 에서 token 문자열 받아오기</span>\n           <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> token <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GLOBAL_TOKEN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token class-name\">String</span> tokenString <span class=\"token operator\">=</span> <span class=\"token class-name\">Objects</span><span class=\"token punctuation\">.</span><span class=\"token function\">requireNonNull</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n           log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Global tokenString => {}\"</span><span class=\"token punctuation\">,</span> tokenString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n           <span class=\"token comment\">// 토큰 검증</span>\n           <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tokenString<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"global_token_string\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n               <span class=\"token comment\">// 토큰이 일치하지 않을 때</span>\n               <span class=\"token keyword\">return</span> <span class=\"token function\">handleUnAuthorized</span><span class=\"token punctuation\">(</span>exchange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token punctuation\">}</span>\n\n           <span class=\"token keyword\">return</span> chain<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>exchange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Mono</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromRunnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n               <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span><span class=\"token function\">isPostLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                   log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Global Filter End : response code -> {}\"</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getStatusCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n               <span class=\"token punctuation\">}</span>\n               log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Custom Post\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">Mono</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">handleUnAuthorized</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServerWebExchange</span> exchange<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">ServerHttpResponse</span> response <span class=\"token operator\">=</span> exchange<span class=\"token punctuation\">.</span><span class=\"token function\">getResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       response<span class=\"token punctuation\">.</span><span class=\"token function\">setStatusCode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>UNAUTHORIZED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">setComplete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@Getter</span>\n   <span class=\"token annotation punctuation\">@Setter</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">String</span> baseMessage<span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> preLogger<span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> postLogger<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span> -v --header <span class=\"token string\">\"GLOBAL_TOKEN:global_token_string\"</span></code></pre></div>\n</li>\n</ul>\n<h4 id=\"custom-filter\" style=\"position:relative;\"><a href=\"#custom-filter\" aria-label=\"custom filter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom filter</h4>\n<ul>\n<li>Custon filter를 이용해서 요청이 들어올 경우 요청된 ID, URI와 응답 시 응답 코드를 로그를 기록하는 전/후처리 필터입니다.</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n     <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> ms1\n       <span class=\"token comment\">#   uri: http://localhost:8089 # 포워딩할 주소, http://localhost:7777/ms1 로 들어오면 http://localhost:8089 로 포워딩</span>\n       <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> lb<span class=\"token punctuation\">:</span>//MS1 <span class=\"token comment\"># Eureka에 등록된 Application 이름</span>\n       <span class=\"token key atrule\">predicates</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> Path=/ms1/<span class=\"token important\">**</span> <span class=\"token comment\"># 해당 gateway 서버의 /ms1/**로 들어오는 요청은 ms1로 인식하겠다는 조건</span>\n       <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">-</span> CustomFilter</code></pre></div>\n</li>\n<li>\n<p>controller</p>\n<ul>\n<li>Scg > CustomFilter.java 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>scg<span class=\"token punctuation\">.</span>filters</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Objects</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GatewayFilter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AbstractGatewayFilterFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>reactive<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServerHttpRequest</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>reactive<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServerHttpResponse</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServerWebExchange</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span>extern<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Slf4j</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">reactor<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>publisher<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Mono</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomFilter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractGatewayFilterFactory</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CustomFilter<span class=\"token punctuation\">.</span>Config</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">CustomFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Config</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">GatewayFilter</span> <span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Config</span> config<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">// Custom Pre Filter</span>\n       <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>exchange<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n           <span class=\"token class-name\">ServerHttpRequest</span> request <span class=\"token operator\">=</span> exchange<span class=\"token punctuation\">.</span><span class=\"token function\">getRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token class-name\">ServerHttpResponse</span> response <span class=\"token operator\">=</span> exchange<span class=\"token punctuation\">.</span><span class=\"token function\">getResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n           log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cutsom Pre filter : request id => {}\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cutsom Pre filter : request uri => {}\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n           <span class=\"token comment\">// Request Header 에 token 이 존재하지 않을 때</span>\n           <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">containsKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"USER_TOKEN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n               <span class=\"token keyword\">return</span> <span class=\"token function\">handleUnAuthorized</span><span class=\"token punctuation\">(</span>exchange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 401 Error</span>\n           <span class=\"token punctuation\">}</span>\n\n           <span class=\"token comment\">// Request Header 에서 token 문자열 받아오기</span>\n           <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> token <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"USER_TOKEN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token class-name\">String</span> tokenString <span class=\"token operator\">=</span> <span class=\"token class-name\">Objects</span><span class=\"token punctuation\">.</span><span class=\"token function\">requireNonNull</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n           log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cutsom tokenString => {}\"</span><span class=\"token punctuation\">,</span> tokenString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n           <span class=\"token comment\">// 토큰 검증</span>\n           <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tokenString<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user_token_string\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n               <span class=\"token comment\">// 토큰이 일치하지 않을 때</span>\n               <span class=\"token keyword\">return</span> <span class=\"token function\">handleUnAuthorized</span><span class=\"token punctuation\">(</span>exchange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token punctuation\">}</span>\n\n           <span class=\"token comment\">// Custom Post Filter</span>\n           <span class=\"token comment\">// 토큰이 일치할 때</span>\n           <span class=\"token keyword\">return</span> chain<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>exchange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Mono</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromRunnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n               log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Custom Post filter : response code -> {}\"</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getStatusCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">Mono</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">handleUnAuthorized</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServerWebExchange</span> exchange<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">ServerHttpResponse</span> response <span class=\"token operator\">=</span> exchange<span class=\"token punctuation\">.</span><span class=\"token function\">getResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       response<span class=\"token punctuation\">.</span><span class=\"token function\">setStatusCode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>UNAUTHORIZED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">setComplete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span> -v --header <span class=\"token string\">\"GLOBAL_TOKEN:global_token_string\"</span> --header <span class=\"token string\">\"CUSTOM_TOKEN:custom_token_string\"</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"zuul\" style=\"position:relative;\"><a href=\"#zuul\" aria-label=\"zuul permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zuul</h2>\n<h3 id=\"zuul-project\" style=\"position:relative;\"><a href=\"#zuul-project\" aria-label=\"zuul project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zuul project</h3>\n<ul>\n<li>\n<p>Netflix 기재된 내용 입니다.</p>\n<blockquote>\n<p>Zuul is the front door for all requests from devices and web sites to the backend of the Netflix streaming application. As an edge service application, Zuul is built to enable dynamic routing, monitoring, resiliency and security. It also has the ability to route requests to multiple Amazon Auto Scaling Groups as appropriate.\n<br /> > <br />\nZuul은 Netflix 스트리밍 애플리케이션의 백엔드 웹 사이트와 디바이스 간의 이르는 모든 요청의 앞단으로, Edge Service Application으로써 동적 라우팅, 모니터링, 복원력과 보안을 위해 구축되었습니다. 또한 Amazon Auto Scaling 그룹에 있는 컨테이너들의 요청을 라우팅 할 수 있는 기능을 제공합니다.</p>\n</blockquote>\n</li>\n<li>\n<p>Zuul 프로젝트 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Spring boot Version : 2.0.5.RELEASE\nLanguage : Java\nGroup Id : com.example\nArtifact Id : zuul\nPackaging Type : war\nJava version : 8\ndependencies : Spring Web, Spring Boot Actuator, Eureka Client, Netflix Zuul</code></pre></div>\n</li>\n<li>\n<p>pom.xml</p>\n<ul>\n<li>pom.xml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>java.version</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>java.version</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token comment\">&lt;!-- &lt;spring-cloud.version>2020.0.3&lt;/spring-cloud.version> --></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>spring-cloud.version</span><span class=\"token punctuation\">></span></span>Finchley.SR1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>spring-cloud.version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>properties</span><span class=\"token punctuation\">></span></span>\n...</code></pre></div>\n</li>\n</ul>\n<p><strong>Note:</strong><br />\nZuul은 현재 21년 10월 기준 spring boot 버전 <em>2.5.4</em> , spring cloud 버전 <em>2020.0.3</em>을 지원하지 않습니다.<br />\n버전 다운이 필요합니다.\n{: .notice—info}</p>\n<ol>\n<li>\n<p>application.yml</p>\n<ul>\n<li>application.yml 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>PORT<span class=\"token punctuation\">:</span><span class=\"token number\">7777</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> zuul\n\n<span class=\"token key atrule\">endpoints</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n <span class=\"token comment\"># shutdown:</span>\n <span class=\"token comment\">#     enabled: true</span>\n <span class=\"token comment\"># health:</span>\n <span class=\"token comment\">#     sensitive: false</span>\n\n<span class=\"token key atrule\">management</span><span class=\"token punctuation\">:</span>\n <span class=\"token comment\"># security:</span>\n <span class=\"token comment\">#     enabled: false</span>\n <span class=\"token key atrule\">endpoints</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">exposure</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span>\n<span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">register-with-eureka</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n   <span class=\"token key atrule\">fetch-registry</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n   <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>9999/eureka/</code></pre></div>\n</li>\n<li>\n<p>ZuulApplication.java</p>\n<ul>\n<li>@EnableDiscoveryClient, @EnableZuulProxy 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>zuul</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>discovery<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableDiscoveryClient</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>hystrix<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableHystrixDashboard</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableZuulProxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@EnableDiscoveryClient</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token comment\">// @EnableHystrixDashboard</span>\n<span class=\"token annotation punctuation\">@EnableZuulProxy</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ZuulApplication</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ZuulApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>Zuul 서버 실행</li>\n<li>\n<p>Router list 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/actuator/routes\"</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/ms1/test\"</span>\n$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/ms2/test\"</span></code></pre></div>\n</li>\n<li>\n<p>설정 변경</p>\n<ul>\n<li>application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">zuul</span><span class=\"token punctuation\">:</span>\n <span class=\"token comment\"># ignored-services: '*' # 유레카에 기반 모든 경로 무시</span>\n <span class=\"token comment\"># ignored-services: ms1 # 유레카에 등록된 특정 Application 무시</span>\n <span class=\"token comment\"># ignored-patterns: /**/ms1/**  # api path로 무시</span>\n <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">ms2</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /ms2/<span class=\"token important\">**</span> <span class=\"token comment\"># api path</span>\n     <span class=\"token key atrule\">service-id</span><span class=\"token punctuation\">:</span> ms2 <span class=\"token comment\"># eureka에 등록된 service-id</span>\n     <span class=\"token key atrule\">strip-prefix</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> <span class=\"token comment\"># **앞의 경로 사용 여부, true일 경우 /ms2/ms2/test, false일 경우 /ms2/test, default ture</span>\n <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">connect-timeout-millis</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10000</span>\n   <span class=\"token key atrule\">socket-timeout-millis</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60000</span>\n <span class=\"token key atrule\">retryable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/api/ms1/ms1/test\"</span>\n$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/api/ms2/test\"</span></code></pre></div>\n</li>\n</ol>\n<h3 id=\"zuulfilter\" style=\"position:relative;\"><a href=\"#zuulfilter\" aria-label=\"zuulfilter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ZuulFilter</h3>\n<ol>\n<li>\n<p>Filter</p>\n<ul>\n<li>RouterFilter 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span>filter</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span>UUID<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ZuulFilter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestContext</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span>exception<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ZuulException</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RouterFilter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ZuulFilter</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> FILTER_TYPE <span class=\"token operator\">=</span> <span class=\"token string\">\"pre\"</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> FILTER_ORDER <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> SHOULD_FILTER <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RouterFilter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token comment\">// filter의 type으로 \"pre\", \"route\", \"post\", \"error\", \"static\"을 용도에 따라 return 하면 됩니다.</span>\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">filterType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> FILTER_TYPE<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token comment\">// type안에서 해당 필터가 실행되는 순서입니다.</span>\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">filterOrder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> FILTER_ORDER<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token comment\">// run method를 실행한다면 true, 실행하지 않아도 된다면 false를 return합니다.</span>\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">shouldFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> SHOULD_FILTER<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token comment\">// 실제 filter의 로직을 담당하는 method입니다.</span>\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ZuulException</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">RequestContext</span> requestContext <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestContext</span><span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">hasCorrelationId</span><span class=\"token punctuation\">(</span>requestContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n           <span class=\"token class-name\">String</span> correlationId <span class=\"token operator\">=</span> <span class=\"token function\">generateCorrelationId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           requestContext<span class=\"token punctuation\">.</span><span class=\"token function\">addZuulRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"correlation-id\"</span><span class=\"token punctuation\">,</span> correlationId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\">>>>>> correlation-id generated in tracking filter: {}.\"</span><span class=\"token punctuation\">,</span> correlationId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n       logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\">>>>>>> correlation-id already exists : {}.\"</span><span class=\"token punctuation\">,</span>\n           requestContext<span class=\"token punctuation\">.</span><span class=\"token function\">getZuulRequestHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"correlation-id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">hasCorrelationId</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RequestContext</span> requestContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> requestContext<span class=\"token punctuation\">.</span><span class=\"token function\">getZuulRequestHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">containsKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"correlation-id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">generateCorrelationId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> UUID<span class=\"token punctuation\">.</span><span class=\"token function\">randomUUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<h2 id=\"ribbon\" style=\"position:relative;\"><a href=\"#ribbon\" aria-label=\"ribbon permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ribbon</h2>\n<h3 id=\"ribbon-이란\" style=\"position:relative;\"><a href=\"#ribbon-%EC%9D%B4%EB%9E%80\" aria-label=\"ribbon 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ribbon 이란</h3>\n<ul>\n<li>Ribbon은 Client에 탑재하는 Load Balancer입니다.</li>\n</ul>\n<p align=\"center\">\n    <img src=\"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbXhzwf%2FbtqA8iRN3zt%2FnQqdlZZZrOkVUDdGGBm1k0%2Fimg.png\" title=\"client-side load balancing\">\n</p>\n<h3 id=\"ribbon-설정\" style=\"position:relative;\"><a href=\"#ribbon-%EC%84%A4%EC%A0%95\" aria-label=\"ribbon 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ribbon 설정</h3>\n<ol>\n<li>\n<p>pom.xml</p>\n<ul>\n<li>Zuul Project > pom.xml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-ribbon<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.2.9.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.retry<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-retry<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.3.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n<li>\n<p>application.yml</p>\n<ul>\n<li>Zuul Project > application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># Ribbon global settings</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">ribbon</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n <span class=\"token comment\"># Max number of retries on the same server (excluding the first try)</span>\n <span class=\"token key atrule\">MaxAutoRetries</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n <span class=\"token comment\"># Max number of next servers to retry (excluding the first server)</span>\n <span class=\"token key atrule\">MaxAutoRetriesNextServer</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n <span class=\"token comment\"># Whether all operations can be retried for this client</span>\n <span class=\"token key atrule\">OkToRetryOnAllOperations</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n <span class=\"token comment\"># Connect timeout used by Apache HttpClient</span>\n <span class=\"token key atrule\">ConnectTimeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n <span class=\"token comment\"># Read timeout used by Apache HttpClient</span>\n <span class=\"token key atrule\">ReadTimeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n<span class=\"token comment\"># Ribbon service-id settings</span>\n<span class=\"token key atrule\">ms2</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">ribbon</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">MaxAutoRetries</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n   <span class=\"token key atrule\">MaxAutoRetriesNextServer</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n   <span class=\"token key atrule\">OkToRetryOnAllOperations</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n   <span class=\"token key atrule\">ConnectTimeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span>\n   <span class=\"token key atrule\">ReadTimeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span>\n   <span class=\"token key atrule\">RetryableStatusCodes</span><span class=\"token punctuation\">:</span> <span class=\"token number\">503</span><span class=\"token punctuation\">,</span> <span class=\"token number\">504</span><span class=\"token punctuation\">,</span> <span class=\"token number\">408</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">404</span>\n   <span class=\"token key atrule\">NFLoadBalancerRuleClassName</span><span class=\"token punctuation\">:</span> com.netflix.loadbalancer.RoundRobinRule</code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span></code></pre></div>\n</li>\n</ol>\n<h2 id=\"hystrix-장애전파-회피\" style=\"position:relative;\"><a href=\"#hystrix-%EC%9E%A5%EC%95%A0%EC%A0%84%ED%8C%8C-%ED%9A%8C%ED%94%BC\" aria-label=\"hystrix 장애전파 회피 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hystrix (장애전파 회피)</h2>\n<h3 id=\"hystrix-란\" style=\"position:relative;\"><a href=\"#hystrix-%EB%9E%80\" aria-label=\"hystrix 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hystrix 란</h3>\n<ul>\n<li>장애전파 회피</li>\n</ul>\n<h3 id=\"hystrix-설정\" style=\"position:relative;\"><a href=\"#hystrix-%EC%84%A4%EC%A0%95\" aria-label=\"hystrix 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hystrix 설정</h3>\n<ol>\n<li>\n<p>application.yml</p>\n<ul>\n<li>Zuul Project > application.yml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">hystrix</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span>\n     <span class=\"token key atrule\">circuitBreaker</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">sleepWindowInMilliseconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span>\n       <span class=\"token key atrule\">errorThresholdPercentage</span><span class=\"token punctuation\">:</span> <span class=\"token number\">50</span>\n       <span class=\"token key atrule\">requestVolumeThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span>\n     <span class=\"token key atrule\">metrics</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">rollingStats</span><span class=\"token punctuation\">:</span>\n         <span class=\"token key atrule\">timeInMilliseconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10000</span>\n         <span class=\"token key atrule\">numBuckets</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n     <span class=\"token comment\">#    event-service:   # 이 부분이 없으면 전체적으로 적용됨</span>\n     <span class=\"token key atrule\">execution</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">isolation</span><span class=\"token punctuation\">:</span>\n         <span class=\"token key atrule\">thread</span><span class=\"token punctuation\">:</span>\n           <span class=\"token key atrule\">timeoutInMilliseconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20000</span></code></pre></div>\n</li>\n</ol>\n<p><strong>Note:</strong><br />\nZuul, Ribbon, Hystrix의 타임아웃 관계<br />\n결론적으로 Timeout 설정값은 ribbon, hystrix 의 값 중 작은 값이 우선 적용 됩니다.\n{: .notice—info}</p>\n<h4 id=\"hystrix-dashboard\" style=\"position:relative;\"><a href=\"#hystrix-dashboard\" aria-label=\"hystrix dashboard permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hystrix dashboard</h4>\n<ol>\n<li>\n<p>pom.xml</p>\n<ul>\n<li>Zuul Project > pom.xml 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-hystrix-dashboard<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.2.9.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n<li>\n<p>ZuulApplication.java</p>\n<ul>\n<li>@EnableHystrixDashboard 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>hystrix<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableHystrixDashboard</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token annotation punctuation\">@EnableHystrixDashboard</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n<li>\n<p>site</p>\n<ul>\n<li><a href=\"http://localhost:7777/hystirx\">Hystrix dashboard</a></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"zipkin-sleuth-트랜젝션-로그-트레이싱\" style=\"position:relative;\"><a href=\"#zipkin-sleuth-%ED%8A%B8%EB%9E%9C%EC%A0%9D%EC%85%98-%EB%A1%9C%EA%B7%B8-%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%8B%B1\" aria-label=\"zipkin sleuth 트랜젝션 로그 트레이싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zipkin, Sleuth (트랜젝션 로그 트레이싱)</h2>\n<h3 id=\"zipkin\" style=\"position:relative;\"><a href=\"#zipkin\" aria-label=\"zipkin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zipkin</h3>\n<ul>\n<li>Zipkin은 분산 환경에서 로그 트레이싱하는 오픈소스로 트위터에서 개발되었습니다.</li>\n<li>\n<p>Zipkin 다운로드 및 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -sSL https://zipkin.io/quickstart.sh <span class=\"token operator\">|</span> <span class=\"token function\">bash</span> -s\n$ java -jar zipkin.jar</code></pre></div>\n</li>\n<li>\n<p>Zipkin 사이트 접속</p>\n<ul>\n<li>localhost:9411</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"sleth\" style=\"position:relative;\"><a href=\"#sleth\" aria-label=\"sleth permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sleth</h3>\n<ul>\n<li>MSA환경에서 클라이언트의 호출은 내부적으로 여러 마이크로서비스를 거쳐서 일어나기 때문에 추적이 어렵습니다. 때문에 이를 추적하기 위해서는 연관된 ID가 필요한데, 이런 ID를 자동으로 생성해주는 것이 Spring Cloud Sleuth입니다.</li>\n</ul>\n<p align=\"center\">\n    <img src=\"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FqLYDg%2FbtqFhljc86O%2FKWUSGninlxOTcAxALKToj1%2Fimg.png\" title=\"Sleuth\">\n</p>\n<ol>\n<li>\n<p>pon.xml 수정</p>\n<ul>\n<li>Scg, Ms1, Ms2, Ms2-copy > pom.xml 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-zipkin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.2.8.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-sleuth<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.0.4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n<li>\n<p>application.yml 수정</p>\n<ul>\n<li>Scg, Ms1, Ms2, Ms2-copy > application.yml(bootstrap.yml) 추가</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">...</span>\n   <span class=\"token key atrule\">sleuth</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">sampler</span><span class=\"token punctuation\">:</span>\n           <span class=\"token key atrule\">probability</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1.0</span>\n   <span class=\"token key atrule\">zipkin</span><span class=\"token punctuation\">:</span>\n       <span class=\"token key atrule\">base-url</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>9411/</code></pre></div>\n</li>\n<li>\n<p>테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms1/test\"</span> -v --header <span class=\"token string\">\"GLOBAL_TOKEN:global_token_string\"</span> --header <span class=\"token string\">\"CUSTOM_TOKEN:custom_token_string\"</span>\n$ <span class=\"token function\">curl</span> -X GET <span class=\"token string\">\"http://localhost:7777/ms2/test\"</span></code></pre></div>\n</li>\n</ol>\n<h2 id=\"참고사이트\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"참고사이트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고사이트</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">MSA(Martin Fowler)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//martinfowler.com/articles/microservice<span class=\"token punctuation\">-</span>trade<span class=\"token punctuation\">-</span>offs.html\n<span class=\"token key atrule\">MSA(Wonit)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//wonit.tistory.com/499<span class=\"token punctuation\">?</span>category=854728\n<span class=\"token key atrule\">MSA(Mr.spock)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mr<span class=\"token punctuation\">-</span>spock.tistory.com/42\n<span class=\"token key atrule\">MSA(온달의 해피클라우드)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//happycloud<span class=\"token punctuation\">-</span>lee.tistory.com/213<span class=\"token punctuation\">,</span> https<span class=\"token punctuation\">:</span>//happycloud<span class=\"token punctuation\">-</span>lee.tistory.com/218\n<span class=\"token key atrule\">MSA(tedigom.log)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//velog.io/@tedigom/MSA<span class=\"token punctuation\">-</span>%EC%A0%9C%EB%8C%80%EB%A1%9C<span class=\"token punctuation\">-</span>%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>MSA%EC%9D%98<span class=\"token punctuation\">-</span>%EA%B8%B0%EB%B3%B8<span class=\"token punctuation\">-</span>%EA%B0%9C%EB%85%90<span class=\"token punctuation\">-</span>3sk28yrv0e\n<span class=\"token key atrule\">SCG(MyLifeForCoding)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mangchhe.github.io/springcloud/2021/04/18/SpringCloudGateway/\n<span class=\"token key atrule\">Zipkin &amp; Sleuth(두발로걷는개의 발자국)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//twofootdog.tistory.com/65\n<span class=\"token key atrule\">Zuul+Ribbon+Hystrix(ASSU)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//assu10.github.io/dev/2020/12/06/netflix<span class=\"token punctuation\">-</span>zuul<span class=\"token punctuation\">-</span>retryable/\n<span class=\"token key atrule\">BFF(주길재)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//giljae.medium.com/back<span class=\"token punctuation\">-</span>end<span class=\"token punctuation\">-</span>for<span class=\"token punctuation\">-</span>front<span class=\"token punctuation\">-</span>end<span class=\"token punctuation\">-</span>pattern<span class=\"token punctuation\">-</span>bff<span class=\"token punctuation\">-</span>4b73f29858d6\n<span class=\"token key atrule\">BFF(삵)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//sarc.io/index.php/cloud/1984<span class=\"token punctuation\">-</span>cdp<span class=\"token punctuation\">-</span>bff<span class=\"token punctuation\">-</span>pattern\n<span class=\"token key atrule\">EDA(Carrey`s)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//jaehun2841.github.io/2019/06/23/2019<span class=\"token punctuation\">-</span>06<span class=\"token punctuation\">-</span>23<span class=\"token punctuation\">-</span>event<span class=\"token punctuation\">-</span>driven<span class=\"token punctuation\">-</span>architecture/<span class=\"token comment\">#event-stream-processing</span>\n<span class=\"token key atrule\">Strangler Pattern(복세편살)</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//americanopeople.tistory.com/193</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%AA%A8%EB%86%80%EB%A6%AC%EC%8B%9D\">모놀리식</a></p>\n<ul>\n<li><a href=\"#%EB%AA%A8%EB%86%80%EB%A6%AC%EC%8B%9D-%EC%9D%B4%EB%9E%80\">모놀리식 이란</a></li>\n<li><a href=\"#%EC%9E%A5%EC%A0%90\">장점</a></li>\n<li><a href=\"#%EB%8B%A8%EC%A0%90\">단점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#msamicroservices-architecture\">MSA(Microservices Architecture)</a></p>\n<ul>\n<li><a href=\"#msa-%EB%9E%80\">MSA 란</a></li>\n<li><a href=\"#%EC%9E%A5%EC%A0%90-1\">장점</a></li>\n<li><a href=\"#%EB%8B%A8%EC%A0%90-1\">단점</a></li>\n<li><a href=\"#%EB%AA%A8%EB%86%80%EB%A6%AC%EC%8B%9D%EC%97%90%EC%84%9C-msa%EB%A1%9C-%EC%A0%84%ED%99%98\">모놀리식에서 MSA로 전환</a></li>\n<li><a href=\"#%EC%A1%B0%EC%A7%81\">조직</a></li>\n<li><a href=\"#%ED%99%95%EC%9E%A5-%EB%B0%A9%EC%8B%9D\">확장 방식</a></li>\n<li><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%84%A4%EA%B3%84\">도메인 설계</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#bffbackend-for-frontend\">BFF(Backend for frontend)</a></p>\n<ul>\n<li><a href=\"#bff-%EB%9E%80\">BFF 란</a></li>\n<li><a href=\"#edaevent-driven-architecture\">EDA(Event driven architecture)</a></li>\n<li><a href=\"#eda-%EB%9E%80\">EDA 란</a></li>\n<li><a href=\"#%EC%9E%A5%EC%A0%90-2\">장점</a></li>\n<li><a href=\"#%EB%8B%A8%EC%A0%90-2\">단점</a></li>\n</ul>\n</li>\n<li><a href=\"#structure\">structure</a></li>\n<li><a href=\"#create-maven-project-in-vscode\">create maven project in vscode</a></li>\n<li>\n<p><a href=\"#spring-cloud-config\">Spring cloud config</a></p>\n<ul>\n<li><a href=\"#spring-cloud-config-%EB%9E%80\">Spring cloud config 란</a></li>\n<li><a href=\"#spring-cloud-config-project\">Spring cloud config project</a></li>\n<li><a href=\"#microservices-1-project\">microservices 1 project</a></li>\n<li><a href=\"#microservices-2-project\">microservices 2 project</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#kafka\">Kafka</a></p>\n<ul>\n<li><a href=\"#%EC%84%A4%EC%B9%98\">설치</a></li>\n<li><a href=\"#microservices-1-project-1\">microservices 1 project</a></li>\n<li><a href=\"#microservices-2-project-1\">microservices 2 project</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#eureka\">Eureka</a></p>\n<ul>\n<li><a href=\"#eureka-%EB%9E%80\">Eureka 란</a></li>\n<li><a href=\"#eureka-server-project\">Eureka server project</a></li>\n<li><a href=\"#microservices-1-project-2\">microservices 1 project</a></li>\n<li><a href=\"#microservices-2-project-2\">microservices 2 project</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#api-gateway\">API Gateway</a></p>\n<ul>\n<li><a href=\"#api-gateway-%EB%9E%80\">API Gateway 란</a></li>\n<li><a href=\"#api-gateway%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%9C-%EC%9D%B4%EC%9C%A0\">API Gateway가 필요한 이유</a></li>\n<li><a href=\"#zuul-vs-scg-spring-cloud-gateway\">Zuul VS SCG (spring-cloud-gateway)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#scg-spring-cloud-gateway\">SCG (spring-cloud-gateway)</a></p>\n<ul>\n<li><a href=\"#scg-%EB%9E%80\">SCG 란</a></li>\n<li><a href=\"#scg-project\">SCG project</a></li>\n<li><a href=\"#load-balance\">Load balance</a></li>\n<li>\n<p><a href=\"#predicate\">Predicate</a></p>\n<ul>\n<li><a href=\"#after-before-between\">After, Before, Between</a></li>\n<li><a href=\"#weight\">Weight</a></li>\n<li><a href=\"#cookie\">Cookie</a></li>\n<li><a href=\"#method\">Method</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#filter\">Filter</a></p>\n<ul>\n<li><a href=\"#addrequestheader-addresponseheader-addrequestparameter\">AddRequestHeader, AddResponseHeader, AddRequestParameter</a></li>\n<li><a href=\"#rewritepath\">RewritePath</a></li>\n<li><a href=\"#retry\">Retry</a></li>\n<li><a href=\"#timeout\">Timeout</a></li>\n<li><a href=\"#global-filter\">Global filter</a></li>\n<li><a href=\"#custom-filter\">Custom filter</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#zuul\">Zuul</a></p>\n<ul>\n<li><a href=\"#zuul-project\">Zuul project</a></li>\n<li><a href=\"#zuulfilter\">ZuulFilter</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ribbon\">Ribbon</a></p>\n<ul>\n<li><a href=\"#ribbon-%EC%9D%B4%EB%9E%80\">Ribbon 이란</a></li>\n<li><a href=\"#ribbon-%EC%84%A4%EC%A0%95\">Ribbon 설정</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#hystrix-%EC%9E%A5%EC%95%A0%EC%A0%84%ED%8C%8C-%ED%9A%8C%ED%94%BC\">Hystrix (장애전파 회피)</a></p>\n<ul>\n<li><a href=\"#hystrix-%EB%9E%80\">Hystrix 란</a></li>\n<li>\n<p><a href=\"#hystrix-%EC%84%A4%EC%A0%95\">Hystrix 설정</a></p>\n<ul>\n<li><a href=\"#hystrix-dashboard\">Hystrix dashboard</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#zipkin-sleuth-%ED%8A%B8%EB%9E%9C%EC%A0%9D%EC%85%98-%EB%A1%9C%EA%B7%B8-%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%8B%B1\">Zipkin, Sleuth (트랜젝션 로그 트레이싱)</a></p>\n<ul>\n<li><a href=\"#zipkin\">Zipkin</a></li>\n<li><a href=\"#sleth\">Sleth</a></li>\n</ul>\n</li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">참고사이트</a></li>\n</ul>\n</div>","excerpt":"MSA를 공부하기로 했습니다. 설명 모놀리식 모놀리식 이란 모놀리식 아키텍쳐란, 마이크로서비스 아키텍쳐의 반대 되는 개념으로 전통의 아키텍쳐를 지칭하는 의미로 생겨난 단어입니다. 하나의 서비스 또는 애플리케이션이 하나의 거대한 아키텍쳐를 모놀리식(Monolithic)하다고 합니다. 장점 개발 초기에 단순한 아키텍쳐 구조와 개발에 용이합니다. 어떤 서비스든지 개발되어있는 환경이 같아서 복잡하지 않습니다. 쉽게 고가용성 서버 환경을 만들 수 있습니다. End-to-End 테스트가 용이합니다. 단점 프로젝트의 규모가 커짐에 따라 애플리케이션 구동시간이 늘어나고 빌드, 배포 시간도 길어집니다. 조그마한 수정사항이 있어도 전체를 다시 빌드하고 배포를 해야합니다. 많은 양의 코드가 몰려있어 개발자가 모두를 이해 할 수 없고 유지보수도 힘듭니다. 일부분의 오류가 전체에 영향을 미칩니다. 기능별로 알맞는 기술, 언어, 프레임워크를 선택하기가 까다롭습니다. 시간이 지남에따라 공통 비즈니스 프로세스…","frontmatter":{"date":"September 23, 2021","title":"[MSA] Springboot msa service","categories":"Framework","author":"TMM","emoji":null},"fields":{"slug":"/2021-09-23-framework-springboot-msa/"}},"next":{"id":"6b83ca72-4895-58b8-b5d8-48a7f496eb87","html":"<p>제 블로그의 테마나 Gatsby의 다른 테마를 활용해서 Github Blog를 만들고 싶은 분들이 계실텐데요! 이런 분들에게 도움을 드리고자 이 글을 쓰게 되었습니다. 잘 안되는 부분이나 궁금한 점을 댓글로 남겨주면 확인해보고 답변 드리도록 하겠습니다!</p>\n<h2 id=\"1-repository-생성하기\" style=\"position:relative;\"><a href=\"#1-repository-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"1 repository 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Repository 생성하기</h2>\n<p>GitHub Blog를 만들려면 Github에 Repository를 생성해야 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIUlEQVQoz32R227TQBCG/Ww8A7xFcwMPwC2qCqRNaudQVHGRC4SQIm5IqiQNAVQpF6hFqM2ZklPTBOfk2Lter/dn7JSoCoKVP83szOzv2R3tfTb7qFAqXZUrn88+fvpSPSmcVgulcrV4Wgn9D/lCNZcvblGieDHMBTZ3UjzL5Qu1t++yES0W1x8fHb2GbqSgJ1JIpI5hJI9xmHiFaDyBfT2JfSOJqJEgDLw0dLwwDhGjeJzOxPQUnj7P4Fn8DaIH8QOtd9PbqQ8a6I+HHIA0naX8PmjK2dKWK+5JQTEXSjJI6cAlK2gvpU9x3LGyHe4rYLawdrXWdTtSG9QxXpie8qFG5gQ/J32sHAbGxT9ZOXyDZTPPZi76w9GeNhwMI9bcgrW0PFrKthmsxQpOIMh4aNf+eh/0Jn0fDokGInfWow/D0e2e1u8PIuZsgQUJukIoxl10+4Pgb1TIwdyt7mgvxH8EJ5NJxJMKSsGj91CcEvQkcKjYFR6EJ+ESIsTHkm5wOWxgFXR/J/qXIMKlQkHbYWo6nSrTXPPLNNf+dE4+2dlcWdxSJKZsJsi6altwR6mgQ8UJjwpowo50GJeM30cQrhRChpMlQUlCf+Ch4M3tbiD4BPfWwrIxnS/DKVvrCdL1grfzNgRX3Wbd4TimlcuVB+cX3zLdbjfZ6/XS9WY7XWu00s32j9C/qjc3XNYa6WarQ7lOmN/Q6iRanevM1/OLh78BcrQRmkf1U+UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/c496970c1925a1fafbb98168e3207240/37523/github-blog.png\"\n        srcset=\"/static/c496970c1925a1fafbb98168e3207240/e9ff0/github-blog.png 180w,\n/static/c496970c1925a1fafbb98168e3207240/f21e7/github-blog.png 360w,\n/static/c496970c1925a1fafbb98168e3207240/37523/github-blog.png 720w,\n/static/c496970c1925a1fafbb98168e3207240/302a4/github-blog.png 1080w,\n/static/c496970c1925a1fafbb98168e3207240/07a9c/github-blog.png 1440w,\n/static/c496970c1925a1fafbb98168e3207240/e57e0/github-blog.png 4064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>GitHub에 로그인 한 뒤에 우측 상단에 있는 New Repository 버튼을 클릭하면 repository 생성 페이지로 이동하게 됩니다. 이 때 Import a repository 버튼을 클릭합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqElEQVQoz5WRyU7jQBBA/W3zDfAX5AJ/geYyhCgEJ2GROCHEzAXIyjIHpByASwSCA05sc0hwnOCt293umirHI0JEkCjpqatcVa9tWftzfLzcaLXua43WdfviqlNvniMXnUb7Ms3P6u3Oaa3ZOfmKs+Y1zjwcHv3OaZuF4mp1dx9KegW2titQru4B1XplB/KFIvzKF6BYKmOvnJ6LKFd3YWOzuKF5nrcC02CInMULmIy4lPPPP4F2IQzDdW0wGOSSJAFEIIpypRQEYQivjgvjNw/c8QSHI2CcA4sZSLwj2/mPoB3HcX5qw+EwRwUGPVRZDmHEYOROppJZUEgSCprNEFSPRqPFwjiOwfd94HhyFMVCfBB9WxgEAVi2DePJBPMQhRLUjGRO/KUw3YsipoaDV8UYVxHC44QaakF8EK5ktzJqIOmf85kvTceSPOZSCCHxDeW09w7VGSwTrpNwDeZCJQqYiOGNBSATumz6eZQnBNZ0zofrunnt8urvj5vbu4PHp6eSZVm6aZq6YRh6r2fqZv9FN/Ds9fspz0Yf63doNmPLtu2Dbre79A8XQB3Mszy2tgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog-1.png\"\n        title=\"github-blog-1.png\"\n        src=\"/static/153e78ed1e400e6710eafc8bf47fbe8d/37523/github-blog-1.png\"\n        srcset=\"/static/153e78ed1e400e6710eafc8bf47fbe8d/e9ff0/github-blog-1.png 180w,\n/static/153e78ed1e400e6710eafc8bf47fbe8d/f21e7/github-blog-1.png 360w,\n/static/153e78ed1e400e6710eafc8bf47fbe8d/37523/github-blog-1.png 720w,\n/static/153e78ed1e400e6710eafc8bf47fbe8d/302a4/github-blog-1.png 1080w,\n/static/153e78ed1e400e6710eafc8bf47fbe8d/07a9c/github-blog-1.png 1440w,\n/static/153e78ed1e400e6710eafc8bf47fbe8d/e57e0/github-blog-1.png 4064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>아래 페이지에 도달하시면 두 가지 정보를 넣어주셔야 하는데, Your old repository’s clone URL에는 사용하고자 하는 gatsby 테마가 있는 repository의 주소를 넣어주시면 됩니다.</p>\n<p>제 블로그 테마를 쓰고 싶으신 분들은 여기에 <a href=\"https://github.com/zoomKoding/zoomkoding.com\">https://github.com/zoomKoding/zoomkoding.com</a>를 넣어주세요!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcElEQVQoz62QzU7CQBDH+2q+g74FXPQtiCc+Uj4ViZ6MQS9KoRU8kfRmGqJ36AX6AbTS0t3uOFtaLEQSYpzkl5n9z8x/txWe2u0zWVE+pJ4yfO2/qV25jwzUnjJQpV5f7XSViGdJPkxHHr5I8uf9w2NWKJbE86tmCyq1BpSrdWhc3yCtKJfEKuRLIhRKZRAr9ajP82/Ur5qQL4p5wXGcDGzCR2gaz/PoarWiQRDQ/d4efBdwNidMp9NsGIaAEITFNVBKwbJsMAwTFksX0npSpyCMMTBN81KYzWZZfsDgIovraBEHwETTORr6/hrCuMdn9iBctyzrsCEhFOz5HI18cFwXXPcLCCU7hkkcZciz4yzB83zAf4gXkOjz0mZHvXAzt3XennleE8redY0tvOWPvhndMczEus8bCMXXIJSug5AGJKRc49CQReeEROe7sWFOMAzjAv4pbNsuCJqmnUwmk9vxeFxBan+krOv63Wg0Ov0GAdofQelOG9cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog-2.png\"\n        title=\"github-blog-2.png\"\n        src=\"/static/dbe340fff7135c1af7d13df1a3673be1/37523/github-blog-2.png\"\n        srcset=\"/static/dbe340fff7135c1af7d13df1a3673be1/e9ff0/github-blog-2.png 180w,\n/static/dbe340fff7135c1af7d13df1a3673be1/f21e7/github-blog-2.png 360w,\n/static/dbe340fff7135c1af7d13df1a3673be1/37523/github-blog-2.png 720w,\n/static/dbe340fff7135c1af7d13df1a3673be1/302a4/github-blog-2.png 1080w,\n/static/dbe340fff7135c1af7d13df1a3673be1/07a9c/github-blog-2.png 1440w,\n/static/dbe340fff7135c1af7d13df1a3673be1/e57e0/github-blog-2.png 4064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>그럼 이제 Repository Name을 입력해줍니다. 이 때 주의할 점은 Repository명은 꼭 [GitHubID].github.io로 설정하셔야 합니다.</p>\n<p>그리고 Begin Import 버튼을 클릭하고 조금 기다리면 선택하신 블로그 테마를 import한 Repository가 생성되게 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDElEQVQoz5WRzXLTMBDH/W68ArxFe6Fv0WGgk+J8qYZyYDh0mGk5QL7LBdImKadkYDgmcWdIsB1JtizbspaVWiCFC+zMf7y78v70l+S8OT19MDgffO72+sNOrzd61+5adfrvR63uAPPeL701anV/9zr9G7V7w1a7/+Xk9dmuc1BxH9bIMRy4TXhcaUCl6kG18RyOnr2AWuMI3FoT3DqBKsrUzeaxzU3vabUBh27dqt704EnFrThBEOzkRQm5AikLULEslcxLpQEU/CHTW6fBX32URAHjfN9ZrVa7WpcAuixQOogoBBsGIY2BCwkiKyDF3ShP4VsYwXT5FSJKQQgBWZ5DWZZGhQGiuUfOer1GoAZUYT40TkFmOTouERzDhkuQCCxKDeYkmVTA4wRzy4CfsyYPw/Au0KxTxkCkqf0x3HD4HjJIZWZrA2EcnScpuvtHIGMcYnRgwsLxaGbdhELXSSLQofgfINMbSrUJyrhOU6nxjmyNQJ0IoaMN1ywW+oZn4w5w5xZoXqrgnCscsq9HKVOUxSqRhRIZvn5WKHSoYh4pkVCVC6nMPrezBrhvgHuwFUmS4DFTm0u8O6XU9tHsPea5gFyihNwehSiKDp3+4Pze5OrTq/HkiuDXG15ceheXIw9rbzSeeOPxhHz4OCTT6Yz4vk/m8zlZLn2y9K/J8toni8XCqI5rL2ez2f0f6/cXevYqyOYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog-3.png\"\n        title=\"github-blog-3.png\"\n        src=\"/static/d0d4283fe9701965b995d91190d8880f/37523/github-blog-3.png\"\n        srcset=\"/static/d0d4283fe9701965b995d91190d8880f/e9ff0/github-blog-3.png 180w,\n/static/d0d4283fe9701965b995d91190d8880f/f21e7/github-blog-3.png 360w,\n/static/d0d4283fe9701965b995d91190d8880f/37523/github-blog-3.png 720w,\n/static/d0d4283fe9701965b995d91190d8880f/302a4/github-blog-3.png 1080w,\n/static/d0d4283fe9701965b995d91190d8880f/07a9c/github-blog-3.png 1440w,\n/static/d0d4283fe9701965b995d91190d8880f/e57e0/github-blog-3.png 4064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"2-repository-가져오기\" style=\"position:relative;\"><a href=\"#2-repository-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0\" aria-label=\"2 repository 가져오기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Repository 가져오기</h2>\n<p>이제 실제로 수정하고 배포할 수도록 내 컴퓨터(local)에 Repsitory를 가져와볼 건데요! 먼저 Repository에서 아래와 같이 초록색 Code 버튼을 클릭하면 링크가 나오게 되는데, 이 링크를 복사합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDklEQVQoz5WRy24TMRSG59V4B3iLdgNvUSGo0lwmcVuEBCuEFLU0aS4tKxJplF2awAKySGcqkWQymfGMx7E9Phy7RUphA0f65Ns5v/9jO2fN5rPrz9dfe/2rYbfX987OW975Rdtrd/reRbtrsfPLnvep1fFanZ5dW7pX93T6w8tO/9uHj81957BUfl4jb+Cw0oBXJRdK1ROo1E/h+PQt1OrHUK41oOI2oGqoE2hgbtUldq9crcNRxbW4jRN4XSqXnDAM94QsQCjgXIJKeaG4KJQGUPAHBbLMV3/tIxyBhNIDZ7FY7GuNqbqQiA6jGMIogXWcAmVbyPAWmqaQUlxnKXz/+QOizQYYy2ErBBRFYZBGEM29dJbLJQpqQKQZaMZBSIlJGuIkhSznkCQUVmFohQHvpihuckz8rjXz9Xr9WNCcU0qxd9sBCiawiRPTikWgIymNY4bu/lEwQZHUODGCKJZlzLo1OVIq6/J/BfUmjrWJOKE6z3ONb2TXCkd8Ox1tqE5Spu/1bDwS3HsQNH1KbFlljNnfQ4cK31Hhxyhmfn8rFTpWKY0Uy2IlGFfmnodaI3jgrFarF7ATpkV0Zeecb0Eptdua/QwhGAiOML5bClEUHTnj8fiJ7/vvbm9v6wiZzWZkPp+T6XRKBoMhGY1G5MtgQG5uJiQIAnvm+wHxgzvi3wXE1CAunr2fTCZPfwHdcRiHYUxTZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog-4.png\"\n        title=\"github-blog-4.png\"\n        src=\"/static/138a6ccf5d2c7ff9d5c762501b9c7ed2/37523/github-blog-4.png\"\n        srcset=\"/static/138a6ccf5d2c7ff9d5c762501b9c7ed2/e9ff0/github-blog-4.png 180w,\n/static/138a6ccf5d2c7ff9d5c762501b9c7ed2/f21e7/github-blog-4.png 360w,\n/static/138a6ccf5d2c7ff9d5c762501b9c7ed2/37523/github-blog-4.png 720w,\n/static/138a6ccf5d2c7ff9d5c762501b9c7ed2/302a4/github-blog-4.png 1080w,\n/static/138a6ccf5d2c7ff9d5c762501b9c7ed2/07a9c/github-blog-4.png 1440w,\n/static/138a6ccf5d2c7ff9d5c762501b9c7ed2/e57e0/github-blog-4.png 4064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>그리고 아래 명령어를 수행하여 블로그를 다운로드합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">[</span>Repository를 저장할 폴더<span class=\"token punctuation\">]</span>\n<span class=\"token function\">git</span> clone <span class=\"token punctuation\">[</span>복사한 주소<span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"3-blog-설치하기\" style=\"position:relative;\"><a href=\"#3-blog-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"3 blog 설치하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Blog 설치하기</h2>\n<p>이제 블로그를 동작시킬 수 있도록 패키지들을 다운로드 해야하는데, 다음 명령어를 실행하시면 받을 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">[</span>Repository 주소<span class=\"token punctuation\">]</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></div>\n<h2 id=\"4-blog-배포-준비하기\" style=\"position:relative;\"><a href=\"#4-blog-%EB%B0%B0%ED%8F%AC-%EC%A4%80%EB%B9%84%ED%95%98%EA%B8%B0\" aria-label=\"4 blog 배포 준비하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Blog 배포 준비하기</h2>\n<p>그리고 이제 Gatsby 테마를 GitHub 페이지에 올리기 위해 gh-pages라는 패키지를 설치해야 합니다. 설치는 다음 명령어를 실행하시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages --save-dev</code></pre></div>\n<p>그리고 나서 package.json에 다음을 추가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public\"</span> <span class=\"token comment\">// 추가</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"5-blog-배포하기\" style=\"position:relative;\"><a href=\"#5-blog-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"5 blog 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Blog 배포하기</h2>\n<p>드디어 배포 준비는 다 끝났습니다. 이제 다음 명령을 실행하시면 github page에 배포하실 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run deploy</code></pre></div>\n<p>조금 기다리신 후에 다음과 같이 <code class=\"language-text\">Published</code>라는 메시지를 받으셨다면 배포는 잘 끝났습니다!</p>\n<blockquote>\n<p>🙋‍♂️ 제 블로그 템플릿을 사용하시는 분들을 <code class=\"language-text\">node 버전이 14 이상</code>이어야 합니다.\nnode -v를 통해 node 버전을 확인하신 후 낮은 버전이라면 업그레이드를 진행해주세요!</p>\n</blockquote>\n<blockquote>\n<p>💡 혹시 그 외에 다른 에러가 발생하신다면 아래에 댓글로 에러 내용을 알려주세요!</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXElEQVQoz1WSZ47CMBCFcw1a6BB6AgmkAaEt4v4HeptvJLPZHyOPLfu1sbeIQiVJrP1+rziOdTwetV6vdTqdFIahhsOhgiCwGo1G6vV68n3fVte7PavXTTeKj4mqqlJRFLrdboqiSOfzWdfrVbvdzsggWCwW6na7X5Am0B9gtlVeAwFYlqUej4fSNLX+fr9rs9mYaoC3263m87kVPeqbKr8Ky1rN5XIxRah8Pp8Gkue5AaOOGACYzWaaTqeaTCYGhmJX7D0/D1XdKr1/3l9Q7AJMkSuKAc+yzFTTQzIej00tJOTb7/flZUWp1+tlVrkMGA+JgH2SJDocDpYrg1mtVpYliomDKFgpQL3dObVBfD4fswo74Fh1YMvl0i53Op1/FinOXJnloA4XNh7BjAVUwIiiwWCgVquldrv977EDaw7EhvKs1ZAVfw5bWKDnq0DizlDKmbsHKQ7IrTnpX/ZxEl8jXPmdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog-5.png\"\n        title=\"github-blog-5.png\"\n        src=\"/static/0ea9b8b7bed5ce6018b3da93286b48ae/37523/github-blog-5.png\"\n        srcset=\"/static/0ea9b8b7bed5ce6018b3da93286b48ae/e9ff0/github-blog-5.png 180w,\n/static/0ea9b8b7bed5ce6018b3da93286b48ae/f21e7/github-blog-5.png 360w,\n/static/0ea9b8b7bed5ce6018b3da93286b48ae/37523/github-blog-5.png 720w,\n/static/0ea9b8b7bed5ce6018b3da93286b48ae/302a4/github-blog-5.png 1080w,\n/static/0ea9b8b7bed5ce6018b3da93286b48ae/07a9c/github-blog-5.png 1440w,\n/static/0ea9b8b7bed5ce6018b3da93286b48ae/17d12/github-blog-5.png 1666w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"6-repository-source-branch-변경하기\" style=\"position:relative;\"><a href=\"#6-repository-source-branch-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0\" aria-label=\"6 repository source branch 변경하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Repository Source Branch 변경하기</h2>\n<p>마지막으로 GitHub 페이지가 작동하려면 GitHub의 Repository 설정에서 배포 할 Branch를 선택해야 합니다. 이를 위해서 Repository에 있는 Settings를 클릭하고 죄측 메뉴에서 Pages를 클릭하여 Github Pages 설정 페이지로 이동합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB90lEQVQoz5WS227TQBBA/W/8Av2L5gX+okJcErm5GKO+IB4QUii9hECSwkuQaUAgAjziXFTJaWyvN/auvZdh1kkhlVAl1j7aWXt0NOOxddhu7/QG/R9n794P+4Mz7+Xhiffq+BTpeEcnXe+488Y7ff3233R7Vww73d7P5y/aFeth1b5Tdw7gkd2C+9UmVPddsJtPwHEPoN58DHa9BXajtd63aThQ229CzW6UNFouPKjaVWsZRrtCARQSOCtAplxLjCXAf8ERSCjds4IgqGiNRq0FaKUJIZBmGRRCQBgRSBIKAuOiKP5gzkopTEe0NrEwwuVyec9aLBYV8xBvgbuOCYWMcRRKCFgI89UFzNNLmCEX7BIWxbIkVBFEKgalS2kpDMPwrxDXRpgAz4tSGMYRxJQAoQmkLAVW5CCwKnNJFG1kNwsJtnglDIIFth0DyxgwloNUZR5+Hri2bq4wJhqFWgipKV3pjDHNOdeccZ3n+ZpCaJTrUrVe14S7GyE3L1arVHKeS4wlpVQSkkjzDOUyzZhknEuzyulijgFz+Ua4Z4R3t0ovp6eULjFtr9s3UxYYS5ww/lMmB2swbHcfRVHN6vUHt85Hn559PB85iDv84Lmjz1/cr9++u74/dSbTmTObrfEneN7wy584PmLi6XTamM/nT8fj8e3fVu4Y+eh3RvQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog-6.png\"\n        title=\"github-blog-6.png\"\n        src=\"/static/338e207ee37735587d9326b12dad5b66/37523/github-blog-6.png\"\n        srcset=\"/static/338e207ee37735587d9326b12dad5b66/e9ff0/github-blog-6.png 180w,\n/static/338e207ee37735587d9326b12dad5b66/f21e7/github-blog-6.png 360w,\n/static/338e207ee37735587d9326b12dad5b66/37523/github-blog-6.png 720w,\n/static/338e207ee37735587d9326b12dad5b66/302a4/github-blog-6.png 1080w,\n/static/338e207ee37735587d9326b12dad5b66/07a9c/github-blog-6.png 1440w,\n/static/338e207ee37735587d9326b12dad5b66/e57e0/github-blog-6.png 4064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>여기서 Source에 있는 Branch를 master(main)에서 gh-pages로 변경한 후에 저장합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8klEQVQoz32Ry27TQBSG/Wq8A7xFs4F36CLQgBrRFLUVBdEdSG1zD12mquRtFME6F0pjx3Y89lzs8fwcT4LU0IiRPp0z/5n558yM02lev+gPBj8ur1t3zVbXvbpqu8121211em6nN3A73b7bpdgb3JDesXqbKNf0+t/d4fDWHd7e3vUHNz+/frusOPsHRy9rR+eo1k/xun6Gt41PeHf82XLw/iPpZ1YvqR6e2vkTSK81zrFfaxw6k1/ens9y+KyQfgLtMeiIQ6sCOjMUCanXeY5tSl3kNkqq42G5qjqLxUNFUznPs1wpZTjnEFKCcqQpgxIcBdVNQRamIPQWRUGQgaHacum/cTzPq2A9aAfMMgiRpAK5LrAIUjo1RsQkAqYsUaIQ8wycWhKEoc6MMeVeBEGwNiQBpNMpxkSrGFJlyHINP1b4HQrcLznuQ2XxmEaYFgiIMhaF2W2IHYa0AFEUgcUxBF1da41d47+GMUsMGRoyNAvPN6tVbMq3FVJZjUxtpM7sxTZjy3BvYyjLQsyYVrSD3lDHMdNJmmr6KM1TrqWUFiprMtS0/i9yY1h1fN9/9bh9ISSyzB4IzgVYkoALgZR+nwtFv5/RuxU7rx6GYd0ZjUbPZrPZl+l0+oE4ofykjI/zyWTyRPuH4/l8fjEej5//AXohGKlgO+2ZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog-7.png\"\n        title=\"github-blog-7.png\"\n        src=\"/static/d71c3cfa77f66a359e31914c9779e78f/37523/github-blog-7.png\"\n        srcset=\"/static/d71c3cfa77f66a359e31914c9779e78f/e9ff0/github-blog-7.png 180w,\n/static/d71c3cfa77f66a359e31914c9779e78f/f21e7/github-blog-7.png 360w,\n/static/d71c3cfa77f66a359e31914c9779e78f/37523/github-blog-7.png 720w,\n/static/d71c3cfa77f66a359e31914c9779e78f/302a4/github-blog-7.png 1080w,\n/static/d71c3cfa77f66a359e31914c9779e78f/07a9c/github-blog-7.png 1440w,\n/static/d71c3cfa77f66a359e31914c9779e78f/e57e0/github-blog-7.png 4064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"7-배포된-페이지-확인하기\" style=\"position:relative;\"><a href=\"#7-%EB%B0%B0%ED%8F%AC%EB%90%9C-%ED%8E%98%EC%9D%B4%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"7 배포된 페이지 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 배포된 페이지 확인하기</h2>\n<p>이제 실제로 잘 배포가 되었는지 확인해봅시다. 여태까지 문제가 없으셨다면 [GitHubID].github.io에 접근했을 때 블로그가 잘 보이는 것을 확인하실 수 있으실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQoz5VSS07DMBTs1bgDnIKygR1HQGyADShbEEfgCJWyQFGqChqVTZO4+adJ821dP95zPm1RJWCkkTPPzxPb48GXYZwFof8RL5NRFMeq64eqH8TqwvFU02JSe0HU02aOynDObzWNjhuMLOZ8To3ZxcD3/UshBPDtFrZI+ibUdQ1pmgLnXNY61us1lFUF1NbVunVhGN6T4RAaVEjeERv4vu5q2WrV6L15rNNaiKLohgwv2j9tRAPpXpYleJ4HcRxDnueyNtXf4e76HAJ3IbVod0ZrW8Pb3hBxYEgmjuNQkzw+IXZM0N5eocxXjeHuKn437MYeP/T+/J8MKYwkSaAoSnnppDebTR/Sf3ZIQuCRBWO2CIJALJdLEUWhHJMkFXgFovHrcWA4bP9StcHI5Mqi4J7rcgyGuzjiE+IYFK+riuNO+9Rb7lLGHVzBEVDKaIQpR/S+IMsyqPD9UZ2OfQz4Ih4G4/H4xLKsZ9M0n5AKEbUym80UTdMUXdcVwzAUxpisE+fzudL1tny0bftlMpmcfgOkfjsLiw7HXgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog-8.png\"\n        title=\"github-blog-8.png\"\n        src=\"/static/103be36c7556a35b794180d024aed322/37523/github-blog-8.png\"\n        srcset=\"/static/103be36c7556a35b794180d024aed322/e9ff0/github-blog-8.png 180w,\n/static/103be36c7556a35b794180d024aed322/f21e7/github-blog-8.png 360w,\n/static/103be36c7556a35b794180d024aed322/37523/github-blog-8.png 720w,\n/static/103be36c7556a35b794180d024aed322/302a4/github-blog-8.png 1080w,\n/static/103be36c7556a35b794180d024aed322/07a9c/github-blog-8.png 1440w,\n/static/103be36c7556a35b794180d024aed322/e57e0/github-blog-8.png 4064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"8-수정하고-배포하기\" style=\"position:relative;\"><a href=\"#8-%EC%88%98%EC%A0%95%ED%95%98%EA%B3%A0-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"8 수정하고 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. 수정하고 배포하기</h2>\n<p>블로그를 수정하시는 방법은 각 블로그 테마마다 다를텐데요. 그에 맞춰서 변동사항을 commit하신 후에 아래 명령어를 실행하시면 변동사항이 블로그에 배포됩니다!</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run deploy</code></pre></div>\n<br/>\n<h2 id=\"️-이-블로그-테마를-이용하고-싶으시다면\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%9D%B4-%EB%B8%94%EB%A1%9C%EA%B7%B8-%ED%85%8C%EB%A7%88%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%9C%BC%EC%8B%9C%EB%8B%A4%EB%A9%B4\" aria-label=\"️ 이 블로그 테마를 이용하고 싶으시다면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⭐️ 이 블로그 테마를 이용하고 싶으시다면!</h2>\n<p>마지막으로 제 블로그 테마를 활용하고 싶으시다면 아래 링크를 참고해주세요!\n<a href=\"https://www.zoomkoding.com/gatsby-starter-zoomkoding-introduction\">https://www.zoomkoding.com/gatsby-starter-zoomkoding-introduction</a></p>\n<p>궁금하신 점이 있으시다면 <a href=\"https://github.com/zoomKoding/zoomkoding-gatsby-blog/issues/new\">이슈</a>로 남겨주시면 최대한 빠르게 답변 드리도록 하겠습니다!🙋‍♂️</p>\n<blockquote>\n<p>🤔 혹시 특정 기능이 없어서 테마 사용을 망설이시거나 제안하고 싶으신 기능이 있으시다면,<br>\n👉 <a href=\"https://github.com/zoomKoding/zoomkoding-gatsby-blog/issues/40\">여기</a>에 댓글 남겨주세요! 적극적으로 반영하겠습니다 :)</p>\n</blockquote>\n<br/>\n<p><strong>위 과정을 따라하시면서 궁금하신 점이 있다면 아래 <code class=\"language-text\">댓글</code>로 남겨주세요!👇</strong></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1-repository-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\">1. Repository 생성하기</a></li>\n<li><a href=\"#2-repository-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0\">2. Repository 가져오기</a></li>\n<li><a href=\"#3-blog-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\">3. Blog 설치하기</a></li>\n<li><a href=\"#4-blog-%EB%B0%B0%ED%8F%AC-%EC%A4%80%EB%B9%84%ED%95%98%EA%B8%B0\">4. Blog 배포 준비하기</a></li>\n<li><a href=\"#5-blog-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">5. Blog 배포하기</a></li>\n<li><a href=\"#6-repository-source-branch-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0\">6. Repository Source Branch 변경하기</a></li>\n<li><a href=\"#7-%EB%B0%B0%ED%8F%AC%EB%90%9C-%ED%8E%98%EC%9D%B4%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\">7. 배포된 페이지 확인하기</a></li>\n<li><a href=\"#8-%EC%88%98%EC%A0%95%ED%95%98%EA%B3%A0-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">8. 수정하고 배포하기</a></li>\n<li><a href=\"#%EF%B8%8F-%EC%9D%B4-%EB%B8%94%EB%A1%9C%EA%B7%B8-%ED%85%8C%EB%A7%88%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%9C%BC%EC%8B%9C%EB%8B%A4%EB%A9%B4\">⭐️ 이 블로그 테마를 이용하고 싶으시다면!</a></li>\n</ul>\n</div>","frontmatter":{"date":"July 06, 2021","title":"Gatsby 테마로 GitHub Blog 만들기","categories":"블로그","author":"줌코딩","emoji":"🔮"},"fields":{"slug":"/gatsby-github-blog/"}},"prev":{"id":"6dcdc2ea-0dda-5bb8-9667-e2fa5eff4be4","html":"<p>JUnit 사용을 습관화 하기위해 정리 하려 합니다.</p>\n<h2 id=\"tdd-장점\" style=\"position:relative;\"><a href=\"#tdd-%EC%9E%A5%EC%A0%90\" aria-label=\"tdd 장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TDD 장점</h2>\n<ul>\n<li>톰캣을 계속내렸다 올릴 필요가 없습니다.</li>\n<li>자동검증이 가능합니다.</li>\n<li>유지보수/디버깅이 쉽습니다.</li>\n</ul>\n<h2 id=\"tdd-개발-순서\" style=\"position:relative;\"><a href=\"#tdd-%EA%B0%9C%EB%B0%9C-%EC%88%9C%EC%84%9C\" aria-label=\"tdd 개발 순서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TDD 개발 순서</h2>\n<ol>\n<li>빈 실행코드 작성</li>\n<li>테스트 코드 작성</li>\n<li>실행코드 리팩토링</li>\n</ol>\n<h2 id=\"실습\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5\" aria-label=\"실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습</h2>\n<ol>\n<li>\n<p>프로젝트 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Spring boot Version : 2.5.4\nLanguage : Java\nGroup Id : com.example.tdd\nArtifact Id : practice\nPackaging Type : war\nJava version : 8\ndependencies : Lombok</code></pre></div>\n</li>\n</ol>\n<h3 id=\"응답-코드-확인\" style=\"position:relative;\"><a href=\"#%EC%9D%91%EB%8B%B5-%EC%BD%94%EB%93%9C-%ED%99%95%EC%9D%B8\" aria-label=\"응답 코드 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>응답 코드 확인</h3>\n<ol>\n<li>\n<p>MemoController.java 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>tdd<span class=\"token punctuation\">.</span>practice<span class=\"token punctuation\">.</span>memo<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>tdd<span class=\"token punctuation\">.</span>practice<span class=\"token punctuation\">.</span>memo<span class=\"token punctuation\">.</span>dto<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MemoResponseDto</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoController</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/memo\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> <span class=\"token string\">\"get memo\"</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>MemoControllerTest.java 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>tdd<span class=\"token punctuation\">.</span>practice<span class=\"token punctuation\">.</span>memo<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MockMvcRequestBuilders</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MockMvcResultMatchers</span><span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MockMvcResultMatchers</span><span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>junit<span class=\"token punctuation\">.</span>jupiter<span class=\"token punctuation\">.</span>api<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Test</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>junit<span class=\"token punctuation\">.</span>jupiter<span class=\"token punctuation\">.</span>api<span class=\"token punctuation\">.</span>extension<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ExtendWith</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebMvcTest</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>junit<span class=\"token punctuation\">.</span>jupiter<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringExtension</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MockMvc</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>hamcrest<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Matchers</span><span class=\"token punctuation\">.</span>is<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MockMvcResultMatchers</span><span class=\"token punctuation\">.</span>jsonPath<span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@ExtendWith</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SpringExtension</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@WebMvcTest</span><span class=\"token punctuation\">(</span>controllers <span class=\"token operator\">=</span> <span class=\"token class-name\">MemoController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoControllerTest</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@Autowired</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">MockMvc</span> mvc<span class=\"token punctuation\">;</span>\n\n   <span class=\"token annotation punctuation\">@Test</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">String</span> getMemo <span class=\"token operator\">=</span> <span class=\"token string\">\"get memo\"</span><span class=\"token punctuation\">;</span>\n\n       mvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/memo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isOk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>getMemo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<h3 id=\"응답-데이터-확인\" style=\"position:relative;\"><a href=\"#%EC%9D%91%EB%8B%B5-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%99%95%EC%9D%B8\" aria-label=\"응답 데이터 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>응답 데이터 확인</h3>\n<ol>\n<li>\n<p>MemoController.java 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoController</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n   <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/memo/dto\"</span><span class=\"token punctuation\">)</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemoResponseDto</span> <span class=\"token function\">memoDto</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"amount\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoResponseDto</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>MemoControllerTest.java 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoControllerTest</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n   <span class=\"token annotation punctuation\">@Test</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMemoResponseDto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"apple\"</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">int</span> amount <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n\n       mvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/memo/dto\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"amount\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n               <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isOk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">jsonPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$.name\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">is</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n               <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">jsonPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$.amount\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">is</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<h3 id=\"dto-테스트\" style=\"position:relative;\"><a href=\"#dto-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"dto 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DTO 테스트</h3>\n<ol>\n<li>\n<p>MemoResponseDto.java 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>tdd<span class=\"token punctuation\">.</span>practice<span class=\"token punctuation\">.</span>memo<span class=\"token punctuation\">.</span>dto</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Getter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequiredArgsConstructor</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoResponseDto</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>MemoResponseDtoTest.java 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>tdd<span class=\"token punctuation\">.</span>practice<span class=\"token punctuation\">.</span>memo<span class=\"token punctuation\">.</span>dto</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>junit<span class=\"token punctuation\">.</span>jupiter<span class=\"token punctuation\">.</span>api<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Test</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>assertj<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>api<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span>assertThat<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoResponseDtoTest</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@Test</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">memoResponseDto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">// given</span>\n       <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"test\"</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">int</span> amount <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token comment\">// when</span>\n       <span class=\"token class-name\">MemoResponseDto</span> dto <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoResponseDto</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token comment\">// then</span>\n       <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>dto<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>dto<span class=\"token punctuation\">.</span><span class=\"token function\">getAmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<h2 id=\"vscode에서-test-실행\" style=\"position:relative;\"><a href=\"#vscode%EC%97%90%EC%84%9C-test-%EC%8B%A4%ED%96%89\" aria-label=\"vscode에서 test 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vscode에서 test 실행</h2>\n<ul>\n<li>클래스 전체 테스트: 클래스명 위의 <em>Run Test</em> 클릭</li>\n<li>메소드 테스트: 메소드명 위의 <em>Run Test</em> 클릭</li>\n</ul>\n<h2 id=\"vscode에서-test-결과창이-안보일때\" style=\"position:relative;\"><a href=\"#vscode%EC%97%90%EC%84%9C-test-%EA%B2%B0%EA%B3%BC%EC%B0%BD%EC%9D%B4-%EC%95%88%EB%B3%B4%EC%9D%BC%EB%95%8C\" aria-label=\"vscode에서 test 결과창이 안보일때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vscode에서 test 결과창이 안보일때</h2>\n<ul>\n<li>하단의 결과 영역을 클릭하면 됩니다.</li>\n</ul>\n<p align=\"center\">\n    <img src=\"https://github.com/whitexozu/whitexozu.github.io/blob/master/assets/images/framework-springboot-tdd-vscode.png?raw=true\" title=\"vscode test report\">\n</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#tdd-%EC%9E%A5%EC%A0%90\">TDD 장점</a></li>\n<li><a href=\"#tdd-%EA%B0%9C%EB%B0%9C-%EC%88%9C%EC%84%9C\">TDD 개발 순서</a></li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%8A%B5\">실습</a></p>\n<ul>\n<li><a href=\"#%EC%9D%91%EB%8B%B5-%EC%BD%94%EB%93%9C-%ED%99%95%EC%9D%B8\">응답 코드 확인</a></li>\n<li><a href=\"#%EC%9D%91%EB%8B%B5-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%99%95%EC%9D%B8\">응답 데이터 확인</a></li>\n<li><a href=\"#dto-%ED%85%8C%EC%8A%A4%ED%8A%B8\">DTO 테스트</a></li>\n</ul>\n</li>\n<li><a href=\"#vscode%EC%97%90%EC%84%9C-test-%EC%8B%A4%ED%96%89\">vscode에서 test 실행</a></li>\n<li><a href=\"#vscode%EC%97%90%EC%84%9C-test-%EA%B2%B0%EA%B3%BC%EC%B0%BD%EC%9D%B4-%EC%95%88%EB%B3%B4%EC%9D%BC%EB%95%8C\">vscode에서 test 결과창이 안보일때</a></li>\n</ul>\n</div>","frontmatter":{"date":"October 23, 2021","title":"[TDD] Springboot tdd","categories":"Framework","author":"TMM","emoji":null},"fields":{"slug":"/2021-10-23-framework-springboot-tdd/"}},"site":{"siteMetadata":{"siteUrl":"https://whitexozu.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/2021-09-23-framework-springboot-msa/","nextSlug":"/gatsby-github-blog/","prevSlug":"/2021-10-23-framework-springboot-tdd/"}},"staticQueryHashes":["1073350324","2938748437"]}